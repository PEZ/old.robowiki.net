<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD><TITLE>Daniel - Robo Wiki -= Collecting Robocode Knowledge =-</TITLE>
<META NAME='KEYWORDS' CONTENT='Daniel'/>
<LINK REL="stylesheet" HREF="/robodocs/wiki.css">
</HEAD><BODY BGCOLOR="white">
<div class=wikiheader><h1><a href="robowiki@Robo_Home"><img src="/images/RoboWiki.png" alt="[Home]" border=0 align="right"></a><a href="robowiki@back=Daniel">Daniel</a></h1><a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<hr class=wikilineheader></div><div class=wikitext>&amp;Beginner to Robocode and recent destroyer of his archnemesis <a href="robowiki@Walls" class=wikipagelink>sample.Walls</a> with 99.25% average wins. You're next, <a href="robowiki@SpinBot" class=wikipagelink>sample.SpinBot</a>.
<p>
<hr noshade class=wikiline size=1>
<p>
Mr. Daniel, sir, welcome to the wiki.  Tell us a little about yourself!  -- <a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
<p>
Welcome to the wiki! Have a good time here. -- <a href="robowiki@Stelokim" class=wikipagelink>Stelokim</a>
<p>
Welcome! Feel free to post any questions you have, I think we're usually a fairly helpful bunch. =) -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
<p>
Destroying the sample bots are the best way to start out. --<a href="robowiki@Chase-san" class=wikipagelink>Chase-san</a>
<p>
Yes, welcome Daniel! Hehe.. destroying the sample robots can be harder than you think.. especially in a melee battle against all sample robots at the same time! ;-) --<a href="robowiki@Fnl" class=wikipagelink>Fnl</a>
<UL >
<li>I've started to notice that. I can beat Walls one-on-one but in a melee with all the sample bots it often comes out a small bit better. --Daniel
<li> Hehe.. yes, in melee battles, it typically a good idea not to be in the middle of the battle, and try to go (take over) a corner to be "safe", at least for a while. ;-)  --<a href="robowiki@Fnl" class=wikipagelink>Fnl</a>
</UL>
<p>
I guess I'm writing a comment to myself right now but I couldn't think of a better place to put an open question (is there a page for this? I couldn't find a sort of <a rel="nofollow" href="http://en.wikipedia.org/wiki/Wikipedia:Village_pump">[Village pump]</a> page but if I just missed it let me know).  Anyways, adding up results in robocode seems to leave me out by 1. As in, (Total score - sumOf(everything else except 1st, 2nd, 3rd) == -1) is always true. Can anyone explain this to me? --Daniel
<UL >
<li> Hmm... this doesn't happen all the time but just with some results. For example, all sample bots together, Walls wins and here's the CSV output: 1st,sample.Walls,8721,4850,840,2668,342,20,0,7,0,0 (8721-(4850+840+2668+342+20) = 1). Sometimes bots are +1, sometimes -1 and sometimes 0. Has anyone else seen this?
</UL>
Here's a datafile (2 battles of 10 round with sample bots):
<pre>
Aug 13, 2007 12:09:09 PM
Results for 10 rounds
Rank,Robot Name,Total Score,Survival,Surv Bonus,Bullet Dmg,Bullet Bonus,Ram Dmg * 2,Ram Bonus, 1sts , 2nds , 3rds 
1st,sample.Walls,8721,4850,840,2668,342,20,0,7,0,0
2nd,sample.SpinBot,7675,4400,240,2785,191,59,0,2,4,1
3rd,sample.Tracker,5947,4050,0,1687,172,32,5,0,0,5
4th,sample.TrackFire,5501,2950,0,2298,253,0,0,0,3,0
5th,sample.MyFirstJuniorRobot,4642,3350,120,1056,80,36,0,1,0,1
6th,sample.Crazy,4377,3450,0,794,16,116,0,0,1,2
7th,sample.Fire,4313,2900,0,1315,94,4,0,0,2,0
8th,sample.MyFirstRobot,3612,2850,0,699,28,35,0,0,0,0
9th,sample.Corners,3299,2300,0,972,24,2,0,0,0,1
10th,sample.RamFire,2983,1250,0,1168,34,448,83,0,0,0
11th,sample.Target,2411,2400,0,0,0,11,0,0,0,0
12th,sample.SittingDuck,2100,2100,0,0,0,0,0,0,0,0
13th,sample.Interactive,2050,2050,0,0,0,0,0,0,0,0
$
Aug 13, 2007 12:20:06 PM
Results for 10 rounds
Rank,Robot Name,Total Score,Survival,Surv Bonus,Bullet Dmg,Bullet Bonus,Ram Dmg * 2,Ram Bonus, 1sts , 2nds , 3rds 
1st,sample.Walls,9637,5550,960,2732,340,40,16,8,0,0
2nd,sample.SpinBot,8905,4900,240,3399,312,54,0,2,4,1
3rd,sample.Tracker,7137,4150,0,2548,315,124,0,0,1,3
4th,sample.Fire,4993,3800,0,1129,59,4,0,0,1,1
5th,sample.Corners,4827,3500,0,1240,87,0,0,0,1,1
6th,sample.Crazy,3930,3200,0,646,1,83,0,0,1,2
7th,sample.MyFirstJuniorRobot,3734,2800,0,857,39,38,0,0,1,0
8th,sample.MyFirstRobot,3648,3050,0,575,10,12,0,0,1,2
9th,sample.RamFire,3358,1650,0,1196,12,428,71,0,0,0
10th,sample.TrackFire,2896,1600,0,1234,62,0,0,0,0,0
11th,sample.SittingDuck,1850,1850,0,0,0,0,0,0,0,0
12th,sample.Target,1710,1700,0,0,0,10,0,0,0,0
13th,sample.Interactive,1250,1250,0,0,0,0,0,0,0,0
$
</pre>
<p>
And here's my analysis of the total score minus the sum of the rest (excluding number of 1st, 2nd, and 3rd places):
<pre>
1st-&gt;sample.Walls (8721): -1
2nd-&gt;sample.SpinBot (7675): 0
3rd-&gt;sample.Tracker (5947): -1
4th-&gt;sample.TrackFire (5501): 0
5th-&gt;sample.MyFirstJuniorRobot (4642): 0
6th-&gt;sample.Crazy (4377): -1
7th-&gt;sample.Fire (4313): 0
8th-&gt;sample.MyFirstRobot (3612): 0
9th-&gt;sample.Corners (3299): -1
10th-&gt;sample.RamFire (2983): 0
11th-&gt;sample.Target (2411): 0
12th-&gt;sample.SittingDuck (2100): 0
13th-&gt;sample.Interactive (2050): 0
1st-&gt;sample.Walls (9637): 1
2nd-&gt;sample.SpinBot (8905): 0
3rd-&gt;sample.Tracker (7137): 0
4th-&gt;sample.Fire (4993): -1
5th-&gt;sample.Corners (4827): 0
6th-&gt;sample.Crazy (3930): 0
7th-&gt;sample.MyFirstJuniorRobot (3734): 0
8th-&gt;sample.MyFirstRobot (3648): -1
9th-&gt;sample.RamFire (3358): -1
10th-&gt;sample.TrackFire (2896): 0
11th-&gt;sample.SittingDuck (1850): 0
12th-&gt;sample.Target (1710): 0
13th-&gt;sample.Interactive (1250): 0
</pre>
Here's what I'm using to test the results (PHP):
<pre>
$x = file('asdf.csv');
foreach ($x as $line) {
	$line = trim($line);
	$line = explode(',', $line);
	if (count($line) != 12 || $line[0] == 'Rank') continue;
	echo $line[0].'-&gt;'.$line[1].' ('.$line[2].'): ';
	$sum = -$line[2];
	for ($i=3; $i&lt;=8; $i++) $sum += $line[$i];
	echo $sum."\n";
}
</pre>
Results are -totalscore + sumof(everything else). For some lazy reason :-) Still shows a weird offset.
--Daniel
<p>
<UL >
<li> Someone who knows the code can confirm/deny this, but I'm guessing that the individual scores you see in the output are rounded, but the math to come up with the total score deals with the floating-point amounts (which, after the addition, is also rounded in the output).  -- <a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
<UL >
<li> I don't know the code well, but after some searching with the SourceForge<a href="robowiki@action=edit&id=SourceForge" class=wikipageedit>?</a> CVS browser I managed to find this:
</UL>
</UL>
<p>
<PRE >
 // In robocode.battle.BattleResultsTableModel<a href="robowiki@action=edit&id=BattleResultsTableModel" class=wikipageedit>?</a>:
</PRE>
<p>
<PRE >
 public Object getValueAt<a href="robowiki@action=edit&id=ValueAt" class=wikipageedit>?</a>(int row, int col) {
     // ...
</PRE>
<p>
<PRE >
     ContestantStatistics<a href="robowiki@action=edit&id=ContestantStatistics" class=wikipageedit>?</a> statistics = r.getStatistics();
</PRE>
<p>
<PRE >
     // ...
</PRE>
<p>
<PRE >
     case 2:
         return "" + (int) (statistics.getTotalScore<a href="robowiki@action=edit&id=TotalScore" class=wikipageedit>?</a>() + 0.5);
     case 3:
         return "" + (int) (statistics.getTotalSurvivalScore<a href="robowiki@action=edit&id=TotalSurvivalScore" class=wikipageedit>?</a>() + 0.5);
     case 4:
         return "" + (int) (statistics.getTotalLastSurvivorBonus<a href="robowiki@action=edit&id=TotalLastSurvivorBonus" class=wikipageedit>?</a>() + 0.5);
     // etc ...
 }
</PRE>
<p>
<p>
<PRE >
 // In robocode.peer.ContestantStatistics<a href="robowiki@action=edit&id=ContestantStatistics" class=wikipageedit>?</a>:
 public interface ContestantStatistics<a href="robowiki@action=edit&id=ContestantStatistics" class=wikipageedit>?</a> {
     public double getTotalScore<a href="robowiki@action=edit&id=TotalScore" class=wikipageedit>?</a>();
     public double getTotalSurvivalScore<a href="robowiki@action=edit&id=TotalSurvivalScore" class=wikipageedit>?</a>();
     public double getTotalLastSurvivorBonus<a href="robowiki@action=edit&id=TotalLastSurvivorBonus" class=wikipageedit>?</a>();
     // etc ...
 }
</PRE>
<p>
So all of the doubles are being summed and rounded to the nearest integer, which would certainly explain off-by-one errors in the output (i.e. 0.3 gets rounded to 0 but 0.3 + 0.3 = 0.6 rounds to 1).
-- <a href="robowiki@AaronR" class=wikipagelink>AaronR</a>
<p>
<UL >
<li> Ah, ok! That makes sense. Looks like that's the reason so. Thanks!! --Daniel
</UL>
<p>
I am sorry that I saw this discusion too late, because I would be able to answer it very quickly. You are right <a href="robowiki@AaronR" class=wikipagelink>AaronR</a>, it is the roundings that causes the "trouble". I don't think it makes sense to write out floating point values. The table with the results would get VERY wide, and the general idea of the result table is ;just" to present the results in a "human readable way", not the exact scores. ;-) --<a href="robowiki@Fnl" class=wikipagelink>Fnl</a>
<p>
<hr noshade class=wikiline size=1>
<p>
Another open question! What's the difference between these two?
<pre>   setTurnRight(90);
   setAhead(100);
   execute();
   while (getDistanceRemaining() != 0 &amp;&amp; getTurnRemaining() != 0) {
     execute();
   }</pre>
and:
<pre>   setTurnRight(90);
   setAhead(100);
   execute();</pre>
Thanks! --Daniel
<UL >
<li> The first code constantly executes until the destination is reached, the second one only executes for one tick. (unless, of course, you have it in a while loop, which would make it go in a circle forever) --<a href="robowiki@Starrynte" class=wikipagelink>Starrynte</a>
<UL >
<li> With the second piece of code as my entire run() code, it executes constantly until the destination is reached. Both run exactly the same. Does no one else experience this? --Daniel
<UL >
<li> As the entire contents of run(), those two are identical. In both, you start by queueing a turn and a forward motion. In the first one, your run "dies" after that (umm, I think!), but in the actual Robocode "world", your bot finishes the movement it began; in the second, your run method stays active each tick (do nothing / move to next tick with execute()) until the motion is finished, but it doesn't add any more commands ever. Typically - as you may already know - bots have infinite loops that execute() each turn, recalculating and adding new commands based on the updated world for that tick. Note that any setXXX command simply overrides the previous instance of that command, even if it hadn't finished. -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
<li> <a href="robowiki@Voidious" class=wikipagelink>Voidious</a> is correct.  Note that <code>setTurnRight(90); setAhead(100);</code> (without the execute) is also functionally equivalent if that's all you have in your bot.  -- <a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
<UL >
<li>Ah, ok. So the second one sends instructions to robocode and finishes, and the first one keeps the run() method alive until it's finished moving. execute() blocks until the next tick, right? Thanks guys! --Daniel
</UL>
</UL>
</UL>
</UL>
</div><hr class=wikilinefooter>
<div class=wikifooter><form method="post" action="robowiki" enctype="application/x-www-form-urlencoded">
<a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<a href="robowiki@action=edit&id=Daniel" class=wikipageedit>Edit text of this page</a> | <a href="robowiki@action=history&id=Daniel">View other revisions</a><br>Last edited August 30, 2007 9:43 EST by <a href="robowiki@Daniel" title="ID 11728 from 193.1.97.38">Daniel</a> <a href="robowiki@action=browse&diff=1&id=Daniel">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /></form></div>
</body>
</html>