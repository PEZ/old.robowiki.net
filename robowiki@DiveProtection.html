<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD><TITLE>DiveProtection - Robo Wiki -= Collecting Robocode Knowledge =-</TITLE>
<META NAME='KEYWORDS' CONTENT='Dive, Protection'/>
<LINK REL="stylesheet" HREF="/robodocs/wiki.css">
</HEAD><BODY BGCOLOR="white">
<div class=wikiheader><h1><a href="robowiki?Robo_Home"><img src="/images/RoboWiki.png" alt="[Home]" border=0 align="right"></a><a href="robowiki?back=DiveProtection">DiveProtection</a></h1><a href="robowiki?Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki?Changes" class=wikipagelink>Changes</a> | <a href="robowiki?action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<hr class=wikilineheader></div><div class=wikitext>When <a href="robowiki?WallSmoothing" class=wikipagelink>WallSmoothing</a> it can be important to make sure you don't dive into simple fire at close ranges. This is dive-protection. I have it in all my <a href="robowiki?WallSmoothing" class=wikipagelink>WallSmoothing</a> bots some of which are <a href="robowiki?Aristocles" class=wikipagelink>Aristocles</a>, <a href="robowiki?Tityus" class=wikipagelink>Tityus</a>, <a href="robowiki?Pugilist" class=wikipagelink>Pugilist</a> and <a href="robowiki?CassiusClay" class=wikipagelink>CassiusClay</a>. Though CC is the only one trying to do this with some finess. -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
Rumour has it that some of the <a href="robowiki?WaveSurfer" class=wikipagelink>WaveSurfer</a>'s don't need dive-protection. <a href="robowiki?Pulsar" class=wikipagelink>Pulsar</a> and <a href="robowiki?Jim" class=wikipagelink>Jim</a> comes to mind. Gives us some details dudes! -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
What I do in <a href="robowiki?CassiusClay" class=wikipagelink>CassiusClay</a> is to always evaluate surfing_danger for three options (forward/stop/reverse). I also give the options for forward and reverse a dive_danger which, when it kicks in, is always much higher than the surfing_danger values. This has the effect that when forward or reverse are dagerous from a diving point of view then the bot is left with the two other movement options. To avoid getting stuck in a corner with an enemy close I also have a case for when both forward and reverse diving_danger is flagged for. Then the bot chooses the option wit the lowest diving danger. (That, is, it doesn't even consider the stop option.) Sounds complicated? Then it's just me not succeeding in explaining it. It really is quite simple... Ask me and I'll try to explain it again. -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
<hr noshade class=wikiline size=1>
<H4>Chat</H4>

<p>
Well, I've improved my surfing. But I still have a nasty problem with diving into the bot. Cost me 5 rounds against bot A. Ick. -- <a href="robowiki?Alcatraz" class=wikipagelink>Alcatraz</a>
<p>
Do you have any mechanism to avoid very short distances? If no, i recomend trying one... In <a href="robowiki?SS" class=wikipagelink>SS</a> i had no choice but implementing a if (dist &lt; 150) then Run-Like-Hell-Away-From-Enemy. <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a> becomes pretty useless in very short distances, actually i think that 200 distance is the least that you should try to stay... -- <a href="robowiki?Axe" class=wikipagelink>Axe</a> 
<p>
There is code to tell it not to turn forward into a bot, but it still tries to surf and that can screw it up. Guess I should tell it just to ignore the wave surfing until at a safe distance. -- <a href="robowiki?Alcatraz" class=wikipagelink>Alcatraz</a>
<p>
Thats what i do... -- <a href="robowiki?Axe" class=wikipagelink>Axe</a>
<p>
Anyone following along the windles of my above explanation should understand that that's <strong>not</strong> what I do. Also. If i understand how <a href="robowiki?SilverSurfer" class=wikipagelink>SilverSurfer</a> does it, that's not what it does either. But clearly Axe should know this better than I do. =) -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
<a href="robowiki?Cyanide" class=wikipagelink>Cyanide</a> is supposed to do it your way, PEZ, but apparently doesn't. Though thinking about that, I realize that I only increase the dive danger if it is very near the walls, because that's when it's usually a problem. But it sometimes dives into the stationary bot when it is not right on the wall, but is instead coming out of a corner. -- <a href="robowiki?Alcatraz" class=wikipagelink>Alcatraz</a>
<p>
I think we might speak about two different things here. One is dive-protection and the other is close-battle-evasion. I think maybe <a href="robowiki?Axe" class=wikipagelink>Axe</a> is suggesting that when you're very close then skip surfing and just run! I still don't do that. As long as there are waves to surf, CC will surf. On the matter of dive-protection; If the <a href="robowiki?WallSmoothing" class=wikipagelink>WallSmoothing</a> will bring CC closer than 260 then CC will only allow very little smoothing before raising that danger-flag. And the diving_danger is set to amount_of_smoothing_asked_for * high_number. That way, if cornered, CC wikk still try to slip out using the widest escape door. -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
I've mentioned this to others, and possibly elsewhere on the wiki, but it can't hurt to mention it here. My form of dive protection in both <a href="robowiki?Dookious" class=wikipagelink>Dookious</a> and <a href="robowiki?Komarious" class=wikipagelink>Komarious</a> is very, very simple. My <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a> algorithm in both is based on the one that <a href="robowiki?PEZ" class=wikipagelink>PEZ</a> uses in <a href="robowiki?CassiusClay" class=wikipagelink>CassiusClay</a>, evaluating forward and reverse (and in Dookious, stop) positions and taking the lowest danger one. Well, in that prediction, I make note of the distance I will be from the wave source when that wave hits, given my <a href="robowiki?WallSmoothing" class=wikipagelink>WallSmoothing</a>. I then multiply the danger for that movement option by (currentDistance / predictedDistance) ^ somePower. In Dookious, I vary that power based on various things; in Komarious, it's 4. I kind of like it, it seems elegant and well rounded, it's also part of my general distancing, and I have certainly found it to be (or forcefully tweaked it to be? =)) quite effective. -- <a href="robowiki?Voidious" class=wikipagelink>Voidious</a>
<p>
What I do in Druss is check what the maximum danger bin my BotWidth<a href="robowiki?action=edit&id=BotWidth" class=wikipageedit>?</a> covers at that distance is. Thus, if the predicted position is too close, it will (hopefully) cover a more dangerous bin (among the many it covers), and avoid that position. I also set the 'default offset' to vary depending on distance. It's quite funny to watch it doing almost straight towards-away (against a wall) surfing against <a href="robowiki?DoctorBob" class=wikipagelink>DoctorBob</a>, with <a href="robowiki?DoctorBob" class=wikipagelink>DoctorBob</a> still getting a 0 hitrate. Against <a href="robowiki?HawkOnFire" class=wikipagelink>HawkOnFire</a> it just does big orbits, until it gets pinned, and then it backs up. -- <a href="robowiki?Skilgannon" class=wikipagelink>Skilgannon</a>
<UL >
<li> That does sound fun to watch :).  You might try some other methods, though.  I've always had more success with methods like "never approach the enemy at greater than 45 degrees" than distance-based methods.  This is because 1) you generally want to keep your distance high, and the method you described may find it safer to dive in toward the enemy, but doesn't take into account that you're then closer for the NEXT shots the enemy will take, and 2) when in a corner, distance-based methods will tend to keep turning you back into that corner, since that's how to keep the furthest distance. -- <a href="robowiki?Simonton" class=wikipagelink>Simonton</a>
</UL>
<p>
<UL >
<li> The reason I like this method is because it doesn't special case. It is actually a more precise method, because it takes into account the entire BotWidth<a href="robowiki?action=edit&id=BotWidth" class=wikipageedit>?</a> at the predicted position. Another thing I was thinking of trying (but never did) was using the sum of the covered dangers at the predicted position, instead of the maximum. This would drive you backwards, because the closer you are the more bins you cover. Theoretically, using either of these methods, <a href="robowiki?BinSmoothing" class=wikipagelink>BinSmoothing</a> isn't necessary. In fact, <a href="robowiki?BinSmoothing" class=wikipagelink>BinSmoothing</a> is more of a bandaid used to cover a lack of these methods. -- <a href="robowiki?Skilgannon" class=wikipagelink>Skilgannon</a>
</UL>
<p>
<UL >
<li> I agree.  I was never able to get that method to work as well as <a href="robowiki?BinSmoothing" class=wikipagelink>BinSmoothing</a>, though.  Best of luck! --<a href="robowiki?Simonton" class=wikipagelink>Simonton</a>
</UL>
<p>
<UL >
<li> Edit conflict...anyways, The way i implement it in <a href="robowiki?Evader" class=wikipagelink>Evader</a> probably uses more code than needed...but: in the while loop in PEZ's iterative method for wallsmoothing, i just add <code> &amp;&amp; Math.abs(Math.abs(goalDirection)-Math.abs(absBearing))&gt;=0.6</code> to the while condition... --<a href="robowiki?Starrynte" class=wikipagelink>Starrynte</a>
</UL>
<p>
<UL >
<li> A couple things. First, you should look at the danger acros the entire BotWidth<a href="robowiki?action=edit&id=BotWidth" class=wikipageedit>?</a> in your surfing no matter what! It's all about that kind of precision. Second, my <a href="robowiki?DiveProtection" class=wikipagelink>DiveProtection</a> in <a href="robowiki?Dookious" class=wikipagelink>Dookious</a> doesn't special case, but it is based on distance. In predicting the forward / stop / reverse positions, it multiplies something like (currentDistance / predictedDistance) into the danger for that spot. This works as both distancing (getting closer is bad) and <a href="robowiki?DiveProtection" class=wikipagelink>DiveProtection</a>. -- <a href="robowiki?Voidious" class=wikipagelink>Voidious</a>
<UL >
<li> Wouldn't that give Dookious undue preference for the stop position in corners? -- <a href="robowiki?Simonton" class=wikipagelink>Simonton</a>
<UL >
<li> Yes, it would give him preference, but I don't think it's enough to get him into trouble getting cornered. If the enemy is along one wall, then stop-position and moving away from that wall should be the options you consider; if the enemy is exactly equidistant from each wall, the multiplier wouldn't be that intense for either of the directions. The original danger is still a large factor in that formula. My experiments with adding an anti-cornering factor in my surfing have all decreased performance, for what it's worth... -- <a href="robowiki?Voidious" class=wikipagelink>Voidious</a>
</UL>
<li> How accurate are you calculating the BotWidth<a href="robowiki?action=edit&id=BotWidth" class=wikipageedit>?</a>, Voidious? I'm just using a simple 50/distance/binWidth, but on the <a href="robowiki?TrigChallenges" class=wikipagelink>TrigChallenges</a> page there is a very complicated method that actually does the exact calculation, using the 4 corner points. I know that pixel-perfect is important, but how pixel-perfect? =) Basically, how much could I expect using that method to help in the rumble? -- <a href="robowiki?Skilgannon" class=wikipagelink>Skilgannon</a>
<UL >
<li> Yes I know i'm not Voidious, but pixel perfect would be quite a bit less accurate then what most do. BotWidth<a href="robowiki?action=edit&id=BotWidth" class=wikipageedit>?</a>, really depends on the angle the enemy is at, and the distance. Your take it your using the bot width to generally reduce the number of bins you use the closer a bot is to you (like some bots do, such as <a href="robowiki?CassiusClay" class=wikipagelink>CassiusClay</a> IIRC). Generally speaking BotWidth<a href="robowiki?action=edit&id=BotWidth" class=wikipageedit>?</a> if its an angle is normally done as atan(40/distance). However if you wanna get an exact width, its something like 40 / max(abs(sin(AbsoluteRobotHeading<a href="robowiki?action=edit&id=AbsoluteRobotHeading" class=wikipageedit>?</a>)),abs(cos(AbsoluteRobotHeading<a href="robowiki?action=edit&id=AbsoluteRobotHeading" class=wikipageedit>?</a>))), then just divide that by the distance and atan it to get the angle. I wouldn't trust my memory, but thats just how I do it if I wanna be picky. --<a href="robowiki?Chase-san" class=wikipagelink>Chase-san</a>
<li> Like Chase said, there are some trig based ways to get more exact BotWidth<a href="robowiki?action=edit&id=BotWidth" class=wikipageedit>?</a> calculations, but I think the great majority of people just use 36 or 40. A couple pixels probably don't matter much (if at all), but not using BotWidth<a href="robowiki?action=edit&id=BotWidth" class=wikipageedit>?</a> at all does matter, I think. In my gun, I just use 36 as BotWidth<a href="robowiki?action=edit&id=BotWidth" class=wikipageedit>?</a> when waiting for my gun to be aimed before shooting and don't use BotWidth<a href="robowiki?action=edit&id=BotWidth" class=wikipageedit>?</a> in any of the stats. I used to use one of the trig-based, more exact methods in my surfing, but re-reading Dooki's source code now (since the full rewrite), I'm just using 36 there, too. <a href="robowiki?PEZ" class=wikipagelink>PEZ</a> always told me it probably didn't matter to get that exact - he's often right about such things =) -- <a href="robowiki?Voidious" class=wikipagelink>Voidious</a>
</UL>
</UL>
</UL>
</div><hr class=wikilinefooter>
<div class=wikifooter><form method="post" action="robowiki" enctype="application/x-www-form-urlencoded">
<a href="robowiki?Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki?Changes" class=wikipagelink>Changes</a> | <a href="robowiki?action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<a href="robowiki?action=edit&id=DiveProtection" class=wikipageedit>Edit text of this page</a> | <a href="robowiki?action=history&id=DiveProtection">View other revisions</a><br>Last edited August 19, 2007 17:30 EST by <a href="robowiki?Voidious" title="ID 8561 from cpe-204-210-154-119.hvc.res.rr.com">Voidious</a> <a href="robowiki?action=browse&diff=1&id=DiveProtection">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /></form></div>
</body>
</html>