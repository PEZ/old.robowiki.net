<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD><TITLE>FastMath/SquareRoot - Robo Wiki -= Collecting Robocode Knowledge =-</TITLE>
<META NAME='KEYWORDS' CONTENT='Fast, Math, Square, Root'/>
<LINK REL="stylesheet" HREF="/robodocs/wiki.css">
</HEAD><BODY BGCOLOR="white">
<div class=wikiheader><h1><a href="robowiki@Robo_Home"><img src="/images/RoboWiki.png" alt="[Home]" border=0 align="right"></a><a href="robowiki@back=/SquareRoot">FastMath/SquareRoot</a></h1><a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@FastMath" class=wikipagelink>FastMath</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<hr class=wikilineheader></div><div class=wikitext>From <a rel="nofollow" href="http://www-106.ibm.com/developerworks/library/wi-elite17.html@ca=dnt-435">http://www-106.ibm.com/developerworks/library/wi-elite17.html?ca=dnt-435</a>
<p>
<PRE >
    // very fast square root approximation
    public final static int sqrt( long val ) {
        long temp, g = 0, b = 0x8000, bshft = 15;
        do {
            if( val &gt;= ( temp = ( ( ( g &lt;&lt; 1 ) + b ) &lt;&lt; bshft-- ) ) ) {
                g += b;
                val -= temp;
            }
        } while( ( b &gt;&gt;= 1 ) &gt; 0 );
        return (int)g;
    }
</PRE>
<p>
Hang on... that casts the answer into an int.  That's a little TOO approximate for my liking. -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
It's also about 10 times slower than Math.sqrt() on my machine... Maybe this whole idea was bad. :-p --<a href="robowiki@David_Alves" class=wikipagelink>David Alves</a>
<p>
I think a lot of these functions are implemented in hardware, so making interpreted software variants may not help. -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
Yeah, square roots should be handled in the math units in your processor. I recall reading somewhere they took about 60-70 cycles on a Pentium II era processor (don't have a source for this), which is slow for hardware, but still blowing away anything you'll ever do in software. This means picking a faster algorithm helps jack all if you're moving it from a one-step in pure hardware to a series of math calls in a software virtual machine :p If this were C or something then we could probably still talk, but in java I think this is just go-kart effect that traps some developers (oo.. I wrote a faster algorithm I can save cycles.. uh.. let's discount the fact that I'm probably spending the 70 cycles the original took in overhead for the while statement on it's own). -- <a href="robowiki@Kuuran" class=wikipagelink>Kuuran</a>
</div><hr class=wikilinefooter>
<div class=wikifooter><form method="post" action="robowiki" enctype="application/x-www-form-urlencoded">
<a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@FastMath" class=wikipagelink>FastMath</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<a href="robowiki@action=edit&id=FastMath/SquareRoot" class=wikipageedit>Edit text of this page</a> | <a href="robowiki@action=history&id=FastMath/SquareRoot">View other revisions</a><br>Last edited February 20, 2004 9:54 EST by <a href="robowiki@Kuuran" title="ID 2304 from Toronto-HSE-ppp3668809.sympatico.ca">Kuuran</a> <a href="robowiki@action=browse&diff=1&id=FastMath/SquareRoot">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /></form></div>
</body>
</html>