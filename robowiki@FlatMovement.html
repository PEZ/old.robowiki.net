<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD><TITLE>SandboxFlattener - Robo Wiki -= Collecting Robocode Knowledge =-</TITLE>
<META NAME='KEYWORDS' CONTENT='Sandbox, Flattener'/>
<LINK REL="stylesheet" HREF="/robodocs/wiki.css">
</HEAD><BODY BGCOLOR="white">
<div class=wikiheader><h3>(redirected from <a href="robowiki@action=edit&id=FlatMovement" class=wikipageedit>FlatMovement</a>)</h3><h1><a href="robowiki@Robo_Home"><img src="/images/RoboWiki.png" alt="[Home]" border=0 align="right"></a><a href="robowiki@back=SandboxFlattener">SandboxFlattener</a></h1><a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<hr class=wikilineheader></div><div class=wikitext>My efforts at creating a movement system designed to give <a href="robowiki@GuessFactorTargeting" class=wikipagelink>GuessFactorTargeting</a> or other statistically-based aiming systems a flat or arbitrary curve.  As a side effect, this may also make any form of <a href="robowiki@AngularTargeting" class=wikipagelink>AngularTargeting</a> fairly ineffective.  Basically, a movement to challenge <a href="robowiki@SandboxDT" class=wikipagelink>SandboxDT</a>'s challenge - "Dodge This" (which is what I believe the DT stands for).  So far (working on the movement itself now), I have a mid-sized <a href="robowiki@MicroBot" class=wikipagelink>MicroBot</a> (just under 600 bytes) that may be able to be tweaked later into a <a href="robowiki@NanoBot" class=wikipagelink>NanoBot</a> that doesn't hit walls, wins about 30-35 battles against <a href="robowiki@SandboxDT" class=wikipagelink>SandboxDT</a> out of 100, while keeping him down to less than 5000 bullet damage and committing more than 4000 damage to him using basic <a href="robowiki@HeadOnTargeting" class=wikipagelink>HeadOnTargeting</a>.  Just for comparison, that's comparable hitting and significantly better dodging than <a href="robowiki@MogBot" class=wikipagelink>MogBot</a> can do against DT, and DT gets about 8000 bullet damage against <a href="robowiki@SpareParts" class=wikipagelink>SpareParts</a>.  Still tweaking, I'll let you guys know, of course, if I master it. -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
Highly interesting. Can you share some of the basic ideas behind the actual flattening? Since I have made some efforts in this as well and failed (more or less) I would be very interested to know more about it. How does it fare against <a href="robowiki@Gouldingi" class=wikipagelink>Gouldingi</a>'s angular gun by the way? -- <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>
<p>
After a little more tweaking, actually, I plan to try it against <a href="robowiki@Gouldingi" class=wikipagelink>Gouldingi</a> as well.  The basis of it so far (as I have it now) is basically a random lateral movement that reacts to bullets being fired.  Every time  I detect that the opponent has fired, I pick a new Velocity (from -8 to 8) and move laterally to my opponent at that speed until I detect the next bullet being fired.  Fundamentally, this should distribute the curve pretty well, in practical application, however, this also assumes that only one bullet is in the air at once.  I've tried a variation where I finish the movement (keep doing my movement until the perceived bullet has past), but without that, it still keeps the important part of the curve fairly flat.  The randomness of the movement is nice, as is the general intuitiveness to move laterally to my opponent.  In that, it may be a good robot to test against non-bullet-dodging robots with good pattern-matchers (or with bullet-dodging ones using random factored aiming).  I do know that it beats <a href="robowiki@MogBot" class=wikipagelink>MogBot</a> more consistently than <a href="robowiki@SillyBot" class=wikipagelink>SillyBot</a> did (which thrived on fooling <a href="robowiki@MogBot" class=wikipagelink>MogBot</a>'s pattern analyzation on change in velocity).  -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
I have been working on finding a good algorithm for curve-flattening for awhile now, and always the problem is the assumption that only one bullet is in the air.  I think I may have found a solution though, using a graph-theory algorithm to find minimum trajectory.  I'm going to start coding this solution tonight.  I'll let you know if I have any success against <a href="robowiki@SandboxDT" class=wikipagelink>SandboxDT</a> with it!  -- <a href="robowiki@Nano" class=wikipagelink>nano</a>
<p>
I'm actually not doing so bad.  One thing I've done that seems to make the flat area wider (and thus a little better) and still has me reacting to every bullet is to pick a number from -20 to 20, set my max velocity to the absolute value of it, and move in the direction of the sign.  If I set the max velocity to something more than 8, it just goes to 8, and the result is I pick max velocity 'most' more than half the time, but still pick the middle stuff, too.  This also helps counter the cases where I turn around due to the wall.  I've also considered just slowing down his learning curve by changing my distance from him often (I believe he keeps his numbers based on distance as well).  Anyways, still tweaking numbers, and not completely without success.  If I get really close, I'll post some code, or put it on the <a href="robowiki@RobocodeRepository" class=wikipagelink>RobocodeRepository</a> or something. -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
Cool! This feels like the firsts step to really challenge DT. We sure have enough guns in the community compraed to movement systems. =) -- <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>
<p>
Lol, I suppose that's why I've been up to experimenting with bots that fool guns lately... -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
Here's my progress thus far, with a little luck, maybe, I got this (keep in mind this is still a brutally simple robot using <a href="robowiki@HeadOnTargeting" class=wikipagelink>HeadOnTargeting</a> that would probably be Micro if I took out the print statements).  I'm a little proud of myself, although some robots actually <em>beat</em> <a href="robowiki@SandboxDT" class=wikipagelink>SandboxDT</a> sometimes:
<p>
<img src="https://students.cs.byu.edu/~kawigi/robots/SandBoxFlattenerScreen.gif">
<p>
<img src="https://students.cs.byu.edu/~kawigi/robots/SandBoxFlattenerScreen2.gif">
<p>
<img src="https://students.cs.byu.edu/~kawigi/robots/SandBoxFlattenerScreen3.gif">
<p>
<img src="https://students.cs.byu.edu/~kawigi/robots/SandBoxFlattenerScreen4.gif">
<p>
<img src="https://students.cs.byu.edu/~kawigi/robots/SandBoxFlattenerScreen5.gif">
<p>
These are with various tweakings of a few parameters.  Also, it modestly beats both Mako and Gouldingi at the moment, just tested that.  How does your gun do against DT?  If it works to about a 16% hit rate from about 300-400 away, we may be able to stick it with my movement and watch DT fall.
<p>
-- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
I'm drooling here. Don't know what hit rate Marshmallow has on that range really, it's an avoider. But we can try. Send me the flatterner bot and I'll plug that movement in. pez@pezius.com. Or I could send you a Marshmallow jar with source if you think you'll have the time the following 36 hours or so, because I won't have much time. -- <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>
<p>
I suppose I could try it on a modified version of <a href="robowiki@SpareParts" class=wikipagelink>SpareParts</a>'s gun, too, it just seems like it makes the little experiment a fairly large robot all of a sudden :-p  If I have a reasonably high hit rate at a longer distance, the movement I have will actually maybe move further away.  It figures out an optimal distance while it fights, and I imagine it gets that close because that's where it can basically dodge still and it can also hit well enough.  If you wanted to send me some of your gun code to plug in, I may be able to find some time to stick that in, too, tomorrow afternoon.  By the way, I always find myself amused when the day on the wiki changes at 4:00 here, but I know that's midnight in Sweden.  Speaking of which, why aren't you in bed?  (lol) -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
Maybe the best/easiest thing to do would be for you to replace the current Lolita move in the <a href="robowiki@Princess" class=wikipagelink>Princess</a>. Lolita guns are the same as in <a href="robowiki@Lacrimas" class=wikipagelink>Lacrimas</a> and that's about as good as a gun get. <a href="robowiki@Princess" class=wikipagelink>Princess</a> is very modular and well designed. I'm not sure I have the latest <a href="robowiki@Princess" class=wikipagelink>Princess</a> sources, but <a href="robowiki@Iiley" class=wikipagelink>iiley</a> has. Still if you send me the source of the Flattener I will plug it in in every bot I have this far. <a href="robowiki@Marshmallow" class=wikipagelink>Marshmallow</a>'s <a href="robowiki@VirtualGuns" class=wikipagelink>VirtualGuns</a> with <a href="robowiki@SandboxFlattener" class=wikipagelink>SandboxFlattener</a> move just might bring DT to a defeat. Say that last sentence three times. =) If the Flatterner learns the best distance, great! Marshmallow movement saves various parameters of it's current movement system between rounds, and we would do the same with Flattener movement. That way we can send up a bot trained on DT to the Rumble, while DT will have to learn it from scratch. See why I am drooling? =) -- <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>
<p>
The reason I was burning midnight oil here was because I was working with a major experiment with <a href="robowiki@Orca" class=wikipagelink>Orca</a>. It seems that maybe it doesn't hold though =( But it can still be because I have some bug in the code. I kling on to that hope. <a href="robowiki@ScruchiPu" class=wikipagelink>ScruchiPu</a>'s NN gun is plain awesome which fuels my hopes. -- <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>
<p>
Lol, every bot you have, eh?  I'll start getting sick of seeing this movement I think ;-)
Actually, learning the best distance is kind of an interesting problem.  Here's a basic exposition on how I do it:
<hr noshade class=wikiline size=1>
&lt;explanation&gt;
<p>
I figured out that for my own statistical analysis, I was keeping such consistant tabs on both my energy and my opponents that I could effectively print out how much energy was lost and gained by both robots at any distance at intervals of 50.  I pick a general range I want to test inside of (in my case, 200 to 550), and I look for a range of distances of 3 intervals (an interval of 150) centered somewhere inside of my test range that seems to be the most beneficial.  This is a very one-on-one sort of approach here, because "beneficial" means basically that his lost energy + my gained energy - my lost energy - his gained energy &gt; 0, or at least it's as high as possible.  What I do to make sure I center in a good place is I add double that coefficient to the coefficient for the interval closer and the coefficient further away to find the "benefit" of the current distance interval.  Then I just sort of try and stay in that most beneficial range.  Unfortunately, it may take a round or two to find that distance, which isn't good against such a competitive robot, and it may be unluckily hit a few extra times when it's at the best range and thereby be prevented from finding the best range.
<p>
One interesting thing about this system (I've tried hard-coding the distance numbers, keeping half-way between him and the wall, followed the wall, etc) is that it's adaptive (and therefore might do better against bots it wasn't tested for), and that the amount of hits the robot can make from a certain range has a bearing on the movement - the defense isn't the only thing.  Good movement should be a beast to hit AND make it easier to hit the enemy if possible.  It seems like a <a href="robowiki@SandboxFlattener" class=wikipagelink>SandboxFlattener</a> with a good gun that works well in the long range may push the robot back comfortably where it may not get hit as much by most robots.
<p>
It turns out with <a href="robowiki@SandboxDT" class=wikipagelink>SandboxDT</a>, there's another reason to stay semi-close, though.  It goes back to the assumption mentioned above that there is only one bullet in the air at a time.  Well, if I'm relatively close (say DT fires a power 3 bullet every 30 ticks, He can only have one relevant bullet in the air if I'm closer than about 300), I can get closer to that, but each bullet is also more dangerous- DT can be more easily fooled, but he has leeway to be off a little bit.
<p>
&lt;/explanation&gt;
<hr noshade class=wikiline size=1>
It might be fun to see <a href="robowiki@Iiley" class=wikipagelink>iiley</a>'s gun or <a href="robowiki@Albert" class=wikipagelink>Albert</a>'s gun on this thing, possibly even his new neural gun (we could break ground in two different ways with the same robot... has <a href="robowiki@ScruchiPu" class=wikipagelink>ScruchiPu</a> tried using a neural net for movement at all yet?)
-- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
While <a href="robowiki@ScruchiPu" class=wikipagelink>ScruchiPu</a>'s gun is amzingly effective it still can't do all that much about DT's movement yet. I think you shouldn't try to do two things at once. It's seldom a good idea. Better take tested guns like Marshmallows' or Lacrimas'. The good thing with Marshmallow is that it has 9 guns, each of which is quite effective against some bots and in the VG array it gets powerful. And they don't hog resources so that the tests of the bot is not all that tedious. Have you checked your Yahoo e-mail BTW? -- <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>
<p>
This one appears to be just dumb luck, and unfortunately it got cut off:
<img src="https://students.cs.byu.edu/~kawigi/robots/SandBoxFlattenerScreen6.png">
<p>
Luck or not, <a href="robowiki@HeadOnTargeting" class=wikipagelink>HeadOnTargeting</a> and 40+% hitrate is good. No version of no bot of mine has ever got better than 33% (well, out of luck and major change of movement It has sometimes got over 50%, but not consistently). Remember DT's saved guess-map though. To see how your bot does you should wipe its guess map and give it 200-300 rounds and then measure your bot over 1000 rounds or 10 100 rounds or however you do it. Of course it's interesting to know what the first 50 rounds or so are as well, since that what will happen in the first encounters on <a href="robowiki@EternalRumble" class=wikipagelink>EternalRumble</a>. <a href="robowiki@Paul_Evans" class=wikipagelink>Paul Evans</a> wrote me an excellent checklist for testing on the <a href="robowiki@RobocodeRepository" class=wikipagelink>RobocodeRepository</a> forums (the Yo-Yo thread). -- <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>
<p>
Could you ask <a href="robowiki@Albert" class=wikipagelink>Albert</a> to battle his NN bot against your bot and make one of those pretty graphs he showed us.  Then we could see if it was actually flat.  Statistics are all well and nice, but an actual flat graph would be brilliant. -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
I realised after i posted that, that it wouldn't be the same, as i want a bearing vs frequency graph, not bearing vs time, like his are.  Can anyone get a nice graph made? -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
Sure: <a href="robowiki@SandboxFlattener/Graphs" class=wikipagelink>/Graphs</a>. -- <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>
<p>
But I would like to see <a href="robowiki@Albert" class=wikipagelink>Albert</a> style graphs as well. Because as good as the current SandboxFlatterner<a href="robowiki@action=edit&id=SandboxFlatterner" class=wikipageedit>?</a> movement is it must contain some rather predictable aspects because <a href="robowiki@Orca" class=wikipagelink>Orca</a>'s <a href="robowiki@NeuralTargeting" class=wikipagelink>NeuralTargeting</a>, which is most often good-for-nothing, rather quickly gets 14+% against <a href="robowiki@MakoHT" class=wikipagelink>MakoHT</a>. Maybe <a href="robowiki@ScruchiPu" class=wikipagelink>ScruchiPu</a> is even better at exploiting the predictability? -- <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>
<p>
You can find the graphs in the following URL: <a rel="nofollow" href="https://www.geocities.com/albert_pv/images.html">https://www.geocities.com/albert_pv/images.html</a>
It seems that some times <a href="robowiki@ScruchiPu" class=wikipagelink>ScruchiPu</a> is able to predict the enemy position quite efectively, but other times it gets confused. I think it is because right now the network is unable to predict accurately the enemy velocity when it uses intermediate velocities... In any case <a href="robowiki@ScruchiPu" class=wikipagelink>ScruchiPu</a> beats <a href="robowiki@MakoHT" class=wikipagelink>MakoHT</a>, even if after 90+ rounds it was still learning. -- <a href="robowiki@Albert" class=wikipagelink>Albert</a>
<p>
<a href="robowiki@ScruchiPu" class=wikipagelink>ScruchiPu</a> (to your credit) is more than a fancy gun - all your bots also have a pretty good movement (and I imagine many of them have similar movement).  Pit <a href="robowiki@ScruchiPu" class=wikipagelink>ScruchiPu</a> with someone its own size (well, I was going to propose <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a>, which is actually smaller than <a href="robowiki@MakoHT" class=wikipagelink>MakoHT</a>), a robot that also saves data and maybe with a more generally practical gun, and you'll see something a lot closer to <a href="robowiki@ScruchiPu" class=wikipagelink>ScruchiPu</a> over the long-haul.  While against some robots, <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a>'s movement is slightly inferior to <a href="robowiki@MakoHT" class=wikipagelink>MakoHT</a>, it's equivalent in essentials, and it should give you a run for your money I suspect. -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
</div><hr class=wikilinefooter>
<div class=wikifooter><form method="post" action="robowiki" enctype="application/x-www-form-urlencoded">
<a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<a href="robowiki@action=edit&id=SandboxFlattener" class=wikipageedit>Edit text of this page</a> | <a href="robowiki@action=history&id=SandboxFlattener">View other revisions</a><br>Last edited May 18, 2006 20:05 EST by <a href="robowiki@GrubbmGait" title="ID 6861 from ip195-142-172-82.dyndsl.versatel.nl">GrubbmGait</a> <a href="robowiki@action=browse&diff=1&id=SandboxFlattener">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /></form></div>
</body>
</html>