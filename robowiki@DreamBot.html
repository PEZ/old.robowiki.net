<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD><TITLE>DreamBot - Robo Wiki -= Collecting Robocode Knowledge =-</TITLE>
<META NAME='KEYWORDS' CONTENT='Dream, Bot'/>
<LINK REL="stylesheet" HREF="/robodocs/wiki.css">
</HEAD><BODY BGCOLOR="white">
<div class=wikiheader><h1><a href="robowiki@Robo_Home"><img src="/images/RoboWiki.png" alt="[Home]" border=0 align="right"></a><a href="robowiki@back=DreamBot">DreamBot</a></h1><a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<hr class=wikilineheader></div><div class=wikitext><H3>Bot Name</H3>

<a href="robowiki@DreamBot" class=wikipagelink>DreamBot</a>
<H4>Author</H4>

Bill a.k.a. Geekgymnast
<H4>Extends</H4>

<a href="robowiki@AdvancedRobot" class=wikipagelink>AdvancedRobot</a>
<H4>What's special about it?</H4>

It's the first robot I have ever made that doesn't fail against all but some weak robots.
<H4>Great, I want to try it. Where can I download it?</H4>

<a rel="nofollow" href="https://www.robocoderepository.com/BotDetail.jsp@id=3588">https://www.robocoderepository.com/BotDetail.jsp?id=3588</a>
Just search for "<a href="robowiki@DreamBot" class=wikipagelink>DreamBot</a>" on the repository to find earlier versions.
<p>
<a rel="nofollow" href="https://geeksrobots.googlepages.com/home">https://geeksrobots.googlepages.com/home</a>
With developmental versions!
<H4>How competitive is it?</H4>

It can beat all the sample robots. It really is a decent bot, and can compete with anything that isn't too advanced.
It can dodge bullets very effectively, without even checking for enemy fire (iow, it's random to dodge)
<H4>How does it <a href="robowiki@Movement" class=wikipagelink>move</a>?</H4>

Completely new for version 2.0. It turns while oscillating. This is unbelievably effective (in my mind). It makes it surprisingly difficult to hit. 
No, it still can't regularly dodge SandBoxDT<a href="robowiki@action=edit&id=SandBoxDT" class=wikipageedit>?</a>'s bullets.
<H4>How does it fire?</H4>

It uses a <a href="robowiki@CircularTargeting" class=wikipagelink>CircularTargeting</a> system that predicts enemy position iteratively. Then it recurs based on the distance to the new location. It actually works very well. Unless the enemy is acting really weird. It also has a <a href="robowiki@HeadOnTargeting" class=wikipagelink>HeadOnTargeting</a> gun, for stuff it's predictor fails with.
<p>
It also has a broken <a href="robowiki@SymbolicPatternMatcher" class=wikipagelink>SymbolicPatternMatcher</a>. I would really appreciate any help with fixing it.
<H4>How does it <a href="robowiki@DodgingBullets" class=wikipagelink>dodge bullets</a>?</H4>

See Movement above.
Few targeters regularly hit this. I suppose a <a href="robowiki@PatternMatcher" class=wikipagelink>PatternMatcher</a> wouldn't have too much trouble, after a while.
<H4>How does the <a href="robowiki@Melee" class=wikipagelink>melee</a> strategy differ from <a href="robowiki@OneOnOne" class=wikipagelink>one-on-one</a>  strategy?</H4>

The current version absolutely fails in Melee. I hope to improve that.
<H4>How does it select a target to attack/avoid in <a href="robowiki@Melee" class=wikipagelink>melee</a>?</H4>

Whatever it scans last. The current targeting system is messed up with multiple robots due to a notable lack of making sure that I'm scanning my target.
<H4>What does it save between rounds and matches?</H4>

It saves gun stats. These it uses to choose between its 2 guns.
It also saves the <a href="robowiki@PatternMatcher" class=wikipagelink>PatternMatcher</a> buffer. This, however, doesn't work, so the code that turns the pmc on is commented out.
<H4>Where did you get the name?</H4>

This will turn into my dream robot...eventually. Also, it originally performed better than my wildest dreams ever predicted.
<H4>Can I use your code?</H4>

Yes. Just be sure to give credit.
Credit for methods in the HelperMethods<a href="robowiki@action=edit&id=HelperMethods" class=wikipageedit>?</a> class goes to Alisdair Owens and his <a href="robowiki@SnippetBot" class=wikipagelink>SnippetBot</a>, although they are in many other places.
<p>
Sorry! Unfortunately, the source for v. 1.0 to 1.8 has been lost. All later versions will include source.
<H4>What's next for your robot?</H4>

I plan to give it more aggressive movement, better dodging movement, and even more guns!
<H4>Does it have any <a href="robowiki@WhiteWhale" class=wikipagelink>WhiteWhale</a>s?</H4>

Wolverine is the big one right now. 
<a href="robowiki@DuelistNano" class=wikipagelink>DuelistNano</a> is another (slightly more than 1/6 my <a href="robowiki@CodeSize" class=wikipagelink>CodeSize</a>!?!?), although after about 10 minutes I was able to win by 18 points in a 10 round match.
<H4>What other robot(s) is it based on?</H4>

<a href="robowiki@SnippetBot" class=wikipagelink>SnippetBot</a>, to an extent.
<hr noshade class=wikiline size=1>
<H4>Comments, questions, feedback:</H4>

<p>
Welcome to the wiki. =) No shame in losing to any of the Duelists, all of David's bots are impressive. Good luck with your bots! -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
<p>
Welcome! A next-step-up from fast targeting would probably be <a href="robowiki@PatternMatching" class=wikipagelink>PatternMatching</a>. Imagine your iterative circular targeting, but instead of keeping the delta-heading and velocity constant, you change them each iteration with data you recorded from what they did last time they were in a situation similar to the current one.  <a href="robowiki@Kuuran" class=wikipagelink>Kuuran</a> put an excellent description on the <a href="robowiki@PatternMatching" class=wikipagelink>PatternMatching</a> page on how to store your patterns symbolically in a String, so that you can use Java's String.substring() and String.indexOf() fuctions to search for previous patterns, making the whole thing a lot less painful. Good luck with your Robocoding endeavours! -- <a href="robowiki@Skilgannon" class=wikipagelink>Skilgannon</a>
<p>
Welcome! The behaviour of your current botversion does have a familiar ring to it ;-)  Just keep in mind that when it comes down to it, movement is more important than targeting. Have much fun with improving your bot!  -- <a href="robowiki@GrubbmGait" class=wikipagelink>GrubbmGait</a>
<p>
Thanks all. Right now I've managed to convince myself that moving in ovals would annihilate everything that's fairly simple, but it's not working too well. The robot that has the oval code in it DOES move in an oval, but it still gets nailed by <a href="robowiki@DreamBot" class=wikipagelink>DreamBot</a>'s targeting system. No, it doesn't revert to <a href="robowiki@HeadOnTargeting" class=wikipagelink>HeadOnTargeting</a>. That would make me feel a whole lot better about it. If I can get it to work, I'll put it in <a href="robowiki@DreamBot" class=wikipagelink>DreamBot</a>, with some tweaks to make it deal with <a href="robowiki@PatternMatching" class=wikipagelink>PatternMatching</a> guns. Are there any pages appropiate to discuss that? At Skilgannon: why do you think I made my <a href="robowiki@CircularTargeting" class=wikipagelink>CircularTargeting</a> system work like that? Something else; Robocode doesn't seem to be packaging the source in the .jar file. Does anyone know why (the checkbox is checked)? -- Geekgymnast<a href="robowiki@action=edit&id=Geekgymnast" class=wikipageedit>?</a>
<p>
Well, moving in ovals of most sizes, are either going to involve moving close-to-straight most of the time, or moving in circle-like arcs most of the time, depending on just how oblong the oval is. So pretty much any possible oval is going to get hit well-enough by either linear or circular targeting. As far as packaging the source, I think it might require the .java and .class files to be in the same directory but I'm not certain of that. --<a href="robowiki@Rednaxela" class=wikipagelink>Rednaxela</a>
<p>
I tried to give it a symbolic pattern matcher, but it doesn't work. Also, the radar has been slipping, so I gave it the FACTOR lock...but now nothing else works (!!??). The new version does, however, have a nice new structure without the sloppy looking       turnGunToTarget<a href="robowiki@action=edit&id=GunToTarget" class=wikipageedit>?</a>(<a href="robowiki@EverythingButTheKitchenSink" class=wikipagelink>EverythingButTheKitchenSink</a> e) {...}. If I really wanted to temporarily remove the pmc, I could with "//" before 1 specific line. Once I get the FACTOR lock working, I'll make that <a href="robowiki@PatternMatcher" class=wikipagelink>PatternMatcher</a> wish it had worked from the start. -- Geekgymnast<a href="robowiki@action=edit&id=Geekgymnast" class=wikipageedit>?</a>
<p>
From what it sounds like, you are calculating how long it would take for your bullet to get to the enemy, iterating that many ticks forward, calculating for the new one, and iterating forward again. This can still leave you slightly inaccurate, especially if they are moving away and towards you a lot. What is better is to iterate forward, but as you are iterating calculate how far the bullet could have traveled at this time. Once the bullet has traveled a further distance than the distance from the firing point to the predicted position you stop iterating.  Take a look <a href="robowiki@CodeSnippets/Nano_Circular_Linear_Predictor" class=wikipagelink>[here]</a> for an example. -- <a href="robowiki@Skilgannon" class=wikipagelink>Skilgannon</a>
<p>
It does do that, in v. 0.1.9 (at least, it did until I implemented the FACTOR lock. Why did that mess it up???). The <a href="robowiki@CircularTargeting" class=wikipagelink>CircularTargeting</a> works perfectly. My <a href="robowiki@SymbolicPatternMatcher" class=wikipagelink>SymbolicPatternMatcher</a> and FACTOR RadarLock<a href="robowiki@action=edit&id=RadarLock" class=wikipageedit>?</a> are what is giving me grief. The <a href="robowiki@PatternMatcher" class=wikipagelink>PatternMatcher</a> misses repeatedly, but I cannot figure out why. The new radar lock somehow is stopping everything else. -- Geekgymnast<a href="robowiki@action=edit&id=Geekgymnast" class=wikipageedit>?</a>
<p>
Fixed the FACTOR lock! Turns out the set<a href="robowiki@TurnRadarRight" class=wikipagelink>TurnRadarRight</a> call in the on<a href="robowiki@ScannedRobot" class=wikipagelink>ScannedRobot</a> event was overriding the turnRadarRightRadians<a href="robowiki@action=edit&id=RadarRightRadians" class=wikipageedit>?</a>(2*pi) that was supposed to scan, but it still tried to complete it! Now I just have to figure out why the pattern matcher is missing Sample.<a href="robowiki@SittingDuck" class=wikipagelink>SittingDuck</a>. It doesn't just spin in circles and spray everywhere; it misses by only a few degrees of gun heading. I'm certain it's a problem with the <a href="robowiki@SymbolicPatternMatcher" class=wikipagelink>SymbolicPatternMatcher</a>, but I just can't identify it.
<p>
<pre>
	public Point nextPMC(Point p, double heading, int patternPlace) {
		double velocity = (int) pattern.charAt(patternPlace); 
		double nextX = Math.min(Math.max(17.9, p.getX() + (Math.sin(heading) * velocity)), width - 17.9);
		double nextY = Math.min(Math.max(17.9, p.getY() + (Math.cos(heading) * velocity)), height - 17.9);
		Point r = new Point();
		r.setLocation(nextX, nextY);
		return r;
	}
	
	public double nextHeadingPMC(int patternPlace, double heading) {
		return heading + Math.toRadians((double) pattern.charAt(patternPlace));
	}
	
	public int indexOfPatternMatch() {
		return pattern.indexOf(getRecentPattern()) + 7;
	}
	public void updateData(ScannedRobotEvent e, double heading, Point bot) {
		double absBearingRadians = (heading + e.getBearingRadians()) % (2 * Math.PI);
		double x = bot.getX() + Math.sin(absBearingRadians) * e.getDistance();
		double y = bot.getY() + Math.cos(absBearingRadians) * e.getDistance();
		p.setLocation(x, y);
		distance = e.getDistance();
		velocity = e.getVelocity();
		previousHeading = this.heading;
		this.heading = e.getHeadingRadians();
		energy = e.getEnergy();
		lastUpdate = e.getTime();
		name = e.getName();
		pattern.append((char) Math.toDegrees(this.heading - previousHeading)).append((char) velocity);
	}
****************************************************************************************************************
		if (gunType == 2) {
			try {
			reTurn.setLocation(pmc(t, 2, p));
			return h.absbearing(p.getX(), p.getY(), reTurn.getX(), reTurn.getY());
			} catch (Exception e) {}
		}
****************************************************************************************************************
	private Point pmc(TargetBot t, double firePower, Point p) {
		double heading = t.getHeading();
		int location = t.indexOfPatternMatch();
		Point pr = new Point(t.p);
		int time = 0;
		do {
			heading = t.nextHeadingPMC(location, heading);
			location++;
			pr.setLocation(t.nextPMC(pr, heading, location));
			location++;
			time ++;
		} while (bulletTravelTime(firePower, p, pr) / 2 &gt; time);
		
		return pr;
	}
	private int bulletTravelTime(double firePower, Point p, Point q) {
		return (int) (p.distance(q)/ (20 - 3 *firePower));
	}
        //this line turns the gun to the predicted point.
        setTurnGunLeftRadians(h.NormaliseBearing(gunheading - gun.turnGunToTarget(gunSelector.gunMode, curTarget, p)));
	
</pre>
<p>
The code between the stars is the part that returns the absolute bearing to the target. All functions not included work perfectly for circular targeting. Can anyone help? -- Geekgymnast<a href="robowiki@action=edit&id=Geekgymnast" class=wikipageedit>?</a>
<p>
Okay, this is very funny. About that "ovalmovement" suggestion I had made: it is incredibly effective against <a href="robowiki@DuelistNano" class=wikipagelink>DuelistNano</a>. I'm not kidding. I was laughing when I saw the <a href="robowiki@NanoBot" class=wikipagelink>NanoBot</a> disabling itself against a robot with ovalmovement implemented. -- Geekgymnast<a href="robowiki@action=edit&id=Geekgymnast" class=wikipageedit>?</a>
<p>
I think you need to cast your char to a byte before you cast it to a double, so that you keep the negative info. The same is true for the other way around, cast to an int before you cast to a char when storing the data. I'm not sure if that's the only problem, but it's what I saw at first glance. Have you tried doing graphical debugging, to see where the pattern matcher is predicting the movement is going? It can make it easier to identify where the problem is. Also, it looks like you don't have any protection against accidentally using the angle data for velocity and vice versa. However, none of these look like they would help with hitting <a href="robowiki@SittingDuck" class=wikipagelink>SittingDuck</a>, so you have a bug somewhere else as well. -- <a href="robowiki@Skilgannon" class=wikipagelink>Skilgannon</a>
<p>
Oh, and I don't think you want to be dividing bulletTravelTime<a href="robowiki@action=edit&id=TravelTime" class=wikipageedit>?</a> by 2... -- <a href="robowiki@Skilgannon" class=wikipagelink>Skilgannon</a>
<p>
I implemented your suggestions, Skilgannon. It nails <a href="robowiki@SittingDuck" class=wikipagelink>SittingDuck</a> now. It still misses Spinbot, so I'll give graphical debugging a shot. As to the new movement...In all modesty, it works quite well.
<p>
<img src="https://geeksrobots.googlepages.com/JollyNinjadestruction.bmp/JollyNinjadestruction-full;init:.bmp">
<p>
Note that this is with <a href="robowiki@PatternMatching" class=wikipagelink>PatternMatching</a> disabled. It isn't a complete one-off, either (I've managed to repeat it). <a href="robowiki@JollyNinja" class=wikipagelink>JollyNinja</a> isn't the best shooter in the Rumble, but it's decent. -- Geekgymnast<a href="robowiki@action=edit&id=Geekgymnast" class=wikipageedit>?</a>
<p>
I used some graphical debugging and also built a droid that takes the last 2 entries on the pattern and mimics the foe. That helped me discover an error in the way velocity is stored; I hadn't realized that a byte is 8 bits including the sign! I reduced the multipliers, and now it annihilates <a href="robowiki@SpinBot" class=wikipagelink>SpinBot</a>. However...it still misses Walls, MyFirstLeader<a href="robowiki@action=edit&id=MyFirstLeader" class=wikipageedit>?</a>, <a href="robowiki@MyFirstRobot" class=wikipagelink>MyFirstRobot</a>, and <a href="robowiki@PatternBot" class=wikipagelink>PatternBot</a>. I doubt that it's the lack of protection for switching the 2 data up. That wouldn't explain the 3 samples. They don't turn very much, but they have very regular velocity changes (that could be entirely picked out with the 10 turns of data that I give it). Whoa, typing that sentence made me realize why the original failed so bad; 7 is not an even number, but every 2 numbers represent a turn! Unfortunately, the number is now 20, so that is no longer applicable. Are there any other possible errors? I'll upload the code to my site, but I'm pretty sure that nothing I did introduced errors. -- Geekgymnast<a href="robowiki@action=edit&id=Geekgymnast" class=wikipageedit>?</a>
<p>
Hang on, you're storing your velocity and delta-heading in different characters, so you don't need to use a byte, you can use a 'short'. It's 16 bits, so you can use a higher multiplier. Be careful though, because using too high a multiplier means you never find a pattern exactly like this one. Another idea: search for a really long pattern, and if you don't find one, search for one half it's length, and keep halving the length of the pattern you're looking for, until you find a pattern that matches. About your fights against <a href="robowiki@PatternBot" class=wikipagelink>PatternBot</a> etc, the above may fix it, but only if the problem is in your pattern-search. I'd like to see the code from inside your getRecentPattern<a href="robowiki@action=edit&id=RecentPattern" class=wikipageedit>?</a>() method, it's the only thing I haven't been able to go over. Also, if there is a problem in your movement rebuilding, such as playing the data backwards, you obviously still won't be able to hit them =) -- <a href="robowiki@Skilgannon" class=wikipagelink>Skilgannon</a>
</div><hr class=wikilinefooter>
<div class=wikifooter><form method="post" action="robowiki" enctype="application/x-www-form-urlencoded">
<a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<a href="robowiki@action=edit&id=DreamBot" class=wikipageedit>Edit text of this page</a> | <a href="robowiki@action=history&id=DreamBot">View other revisions</a><br>Last edited April 20, 2009 14:37 EST by <a href="robowiki@Skilgannon" title="ID 16995 from bc2-rba-1-0.cache.isnet.net">Skilgannon</a> <a href="robowiki@action=browse&diff=1&id=DreamBot">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /></form></div>
</body>
</html>