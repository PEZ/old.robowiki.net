<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD><TITLE>Lukious/Rewrite - Robo Wiki -= Collecting Robocode Knowledge =-</TITLE>
<META NAME='KEYWORDS' CONTENT='Lukious, Rewrite'/>
<LINK REL="stylesheet" HREF="/robodocs/wiki.css">
</HEAD><BODY BGCOLOR="white">
<div class=wikiheader><h1><a href="robowiki@Robo_Home"><img src="/images/RoboWiki.png" alt="[Home]" border=0 align="right"></a><a href="robowiki@back=/Rewrite">Lukious/Rewrite</a></h1><a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<hr class=wikilineheader></div><div class=wikitext>I'm re-deriving Lukious from post-rewrite Dookious. <a href="robowiki@Simonton" class=wikipagelink>Simonton</a> demanded I post some TC results by today, so here are the latest. I'll clean this up later.
<p>
<strong><a href="robowiki@TargetingChallenge2K7/Results" class=wikipagelink>TargetingChallenge2K7/Results</a> (500 rounds):</strong>
<p>
<TABLE CELLSPACING='0' CELLPADDING='1' BORDER='1'>
<TR VALIGN='CENTER' ><td colspan='0.5'><strong>Name</strong> </td><td colspan="0.5"><strong>Gun</strong> </td><td colspan="0.5"><strong>CC</strong> </td><td colspan="0.5"><strong>RMX</strong> </td><td colspan="0.5"><strong>SHA</strong> </td><td colspan="0.5"><strong>WS</strong> </td><td colspan="0.5"><strong>WOE</strong> </td><td colspan="0.5"><strong>Surf</strong></td><td colspan="0.5"><strong>DM</strong> </td><td colspan="0.5"><strong>FT</strong> </td><td colspan="0.5"><strong>GG</strong> </td><td colspan="0.5"><strong>RMC</strong> </td><td colspan="0.5"><strong>WLO</strong> </td><td colspan="0.5"><strong>No Surf</strong></td><td colspan="0.5"><strong>Total</strong> </td><td colspan="0.5"><strong>Comment</strong></td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.10 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> 68.03 </td><td colspan="0.5"> 74.49 </td><td colspan="0.5"> 64.95 </td><td colspan="0.5"> 69.13 </td><td colspan="0.5"> 69.21 </td><td colspan="0.5"> <strong>69.16</strong> </td><td colspan="0.5"> 87.11 </td><td colspan="0.5"> 77.76 </td><td colspan="0.5"> 82.63 </td><td colspan="0.5"> 77.79 </td><td colspan="0.5"> 81.97 </td><td colspan="0.5"> <strong>81.45</strong> </td><td colspan="0.5"> <strong>75.31</strong> </td><td colspan="0.5"> 3 seasons</td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.13 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> 72.94 </td><td colspan="0.5"> 76.93 </td><td colspan="0.5"> 69.59 </td><td colspan="0.5"> 76.67 </td><td colspan="0.5"> 72.84 </td><td colspan="0.5"> <strong>73.79</strong> </td><td colspan="0.5"> 87.99 </td><td colspan="0.5"> 79.71 </td><td colspan="0.5"> 84.85 </td><td colspan="0.5"> 78.04 </td><td colspan="0.5"> 80.63 </td><td colspan="0.5"> <strong>82.24</strong> </td><td colspan="0.5"> <strong>78.02</strong> </td><td colspan="0.5"> 3 seasons</td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.15 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> 69.82 </td><td colspan="0.5"> 76.40 </td><td colspan="0.5"> 71.37 </td><td colspan="0.5"> 75.43 </td><td colspan="0.5"> 69.87 </td><td colspan="0.5"> <strong>72.58</strong> </td><td colspan="0.5"> 87.66 </td><td colspan="0.5"> 78.94 </td><td colspan="0.5"> 83.03 </td><td colspan="0.5"> 76.44 </td><td colspan="0.5"> 79.56 </td><td colspan="0.5"> <strong>81.13</strong> </td><td colspan="0.5"> <strong>76.85</strong> </td><td colspan="0.5"> 3 seasons</td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.16 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> 71.21 </td><td colspan="0.5"> 76.80 </td><td colspan="0.5"> 70.67 </td><td colspan="0.5"> 76.96 </td><td colspan="0.5"> 71.50 </td><td colspan="0.5"> <strong>73.43</strong> </td><td colspan="0.5"> 88.06 </td><td colspan="0.5"> 78.39 </td><td colspan="0.5"> 83.55 </td><td colspan="0.5"> 77.13 </td><td colspan="0.5"> 81.40 </td><td colspan="0.5"> <strong>81.71</strong> </td><td colspan="0.5"> <strong>77.57</strong> </td><td colspan="0.5"> 3 seasons</td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.20 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> 70.95 </td><td colspan="0.5"> 78.45 </td><td colspan="0.5"> 72.45 </td><td colspan="0.5"> 77.76 </td><td colspan="0.5"> 71.60 </td><td colspan="0.5"> <strong>74.23</strong> </td><td colspan="0.5"> 86.83 </td><td colspan="0.5"> 78.06 </td><td colspan="0.5"> 85.96 </td><td colspan="0.5"> 77.66 </td><td colspan="0.5"> 79.59 </td><td colspan="0.5"> <strong>81.62</strong> </td><td colspan="0.5"> <strong>77.93</strong> </td><td colspan="0.5"> 3 seasons</td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.24 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> </td><td colspan="0.5"> </td><td colspan="0.5"> </td><td colspan="0.5"> </td><td colspan="0.5"> </td><td colspan="0.5"> </td><td colspan="0.5"> 87.79 </td><td colspan="0.5"> 77.84 </td><td colspan="0.5"> 84.14 </td><td colspan="0.5"> 77.65 </td><td colspan="0.5"> 81.27 </td><td colspan="0.5"> <strong>81.74</strong> </td><td colspan="0.5"> </td><td colspan="0.5"> 3 seasons</td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.32 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> </td><td colspan="0.5"> </td><td colspan="0.5"> </td><td colspan="0.5"> </td><td colspan="0.5"> </td><td colspan="0.5"> </td><td colspan="0.5"> 88.25 </td><td colspan="0.5"> 78.40 </td><td colspan="0.5"> 84.78 </td><td colspan="0.5"> 77.47 </td><td colspan="0.5"> 80.30 </td><td colspan="0.5"> <strong>81.84</strong> </td><td colspan="0.5"> </td><td colspan="0.5"> 8 seasons</td></TR>
</TABLE>
<p>
<strong><a href="robowiki@TargetingChallenge2K7/ResultsFastLearning" class=wikipagelink>TargetingChallenge2K7/ResultsFastLearning</a>:</strong>
<p>
<TABLE CELLSPACING='0' CELLPADDING='1' BORDER='1'>
<TR VALIGN='CENTER' ><td colspan='0.5'><strong>Name</strong> </td><td colspan="0.5"><strong>Gun</strong> </td><td colspan="0.5"><strong>CC</strong> </td><td colspan="0.5"><strong>RMX</strong> </td><td colspan="0.5"><strong>SHA</strong> </td><td colspan="0.5"><strong>WS</strong> </td><td colspan="0.5"><strong>WOE</strong> </td><td colspan="0.5"><strong>Surf</strong></td><td colspan="0.5"><strong>DM</strong> </td><td colspan="0.5"><strong>FT</strong> </td><td colspan="0.5"><strong>GG</strong> </td><td colspan="0.5"><strong>RMC</strong> </td><td colspan="0.5"><strong>WLO</strong> </td><td colspan="0.5"><strong>No Surf</strong></td><td colspan="0.5"><strong>Total</strong> </td><td colspan="0.5"><strong>Comment</strong>steady</td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.10 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> 67.87 </td><td colspan="0.5"> 75.65 </td><td colspan="0.5"> 61.07 </td><td colspan="0.5"> 71.89 </td><td colspan="0.5"> 68.87 </td><td colspan="0.5"> <strong>69.07</strong> </td><td colspan="0.5"> 87.47 </td><td colspan="0.5"> 78.77 </td><td colspan="0.5"> 80.88 </td><td colspan="0.5"> 78.29 </td><td colspan="0.5"> 81.64 </td><td colspan="0.5"> <strong>81.41</strong> </td><td colspan="0.5"> <strong>75.24</strong> </td><td colspan="0.5"> 40 seasons</td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.13 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> 70.65 </td><td colspan="0.5"> 77.40 </td><td colspan="0.5"> 64.45 </td><td colspan="0.5"> 76.03 </td><td colspan="0.5"> 71.93 </td><td colspan="0.5"> <strong>72.09</strong> </td><td colspan="0.5"> 86.77 </td><td colspan="0.5"> 80.14 </td><td colspan="0.5"> 81.91 </td><td colspan="0.5"> 78.17 </td><td colspan="0.5"> 81.73 </td><td colspan="0.5"> <strong>81.74</strong> </td><td colspan="0.5"> <strong>76.92</strong> </td><td colspan="0.5"> 40 seasons</td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.20 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> 69.49 </td><td colspan="0.5"> 76.99 </td><td colspan="0.5"> 68.53 </td><td colspan="0.5"> 75.58 </td><td colspan="0.5"> 70.63 </td><td colspan="0.5"> <strong>72.24</strong> </td><td colspan="0.5"> 86.63 </td><td colspan="0.5"> 78.52 </td><td colspan="0.5"> 82.71 </td><td colspan="0.5"> 77.86 </td><td colspan="0.5"> 79.41 </td><td colspan="0.5"> <strong>81.03</strong> </td><td colspan="0.5"> <strong>76.63</strong> </td><td colspan="0.5"> 40 seasons</td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.24 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> 68.39 </td><td colspan="0.5"> 76.93 </td><td colspan="0.5"> 67.22 </td><td colspan="0.5"> 74.21 </td><td colspan="0.5"> 69.14 </td><td colspan="0.5"> <strong>71.18</strong> </td><td colspan="0.5"> 86.23 </td><td colspan="0.5"> 76.21 </td><td colspan="0.5"> 82.17 </td><td colspan="0.5"> 75.34 </td><td colspan="0.5"> 79.92 </td><td colspan="0.5"> <strong>79.25</strong> </td><td colspan="0.5"> <strong>75.58</strong> </td><td colspan="0.5"> 50 seasons</td></TR>
</TABLE>
<p>
<strong><a href="robowiki@TargetingChallenge2K6/Results" class=wikipagelink>TargetingChallenge2K6/Results</a> (500 rounds):</strong>
<p>
<TABLE CELLSPACING='0' CELLPADDING='1' BORDER='1'>
<TR VALIGN='CENTER' ><td colspan='0.5'> <strong>Name</strong> </td><td colspan="0.5"> <strong>Gun</strong> </td><td colspan="0.5"> <strong>BFly</strong> </td><td colspan="0.5"> <strong>CC</strong> </td><td colspan="0.5"> <strong>Chk</strong> </td><td colspan="0.5"> <strong>Cig</strong> </td><td colspan="0.5"> <strong>Cya</strong> </td><td colspan="0.5"> <strong>DM</strong> </td><td colspan="0.5"> <strong>FM</strong> </td><td colspan="0.5"> <strong>Grb</strong> </td><td colspan="0.5"> <strong>RMB</strong> </td><td colspan="0.5"> <strong>Tig</strong> </td><td colspan="0.5"> <strong>Total</strong> </td><td colspan="0.5"> <strong>Comment</strong> </td></TR>
<TR VALIGN='CENTER' ><td colspan='0.5'> <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> 1.19.10 </td><td colspan="0.5"> DC/GF </td><td colspan="0.5"> 99.76 </td><td colspan="0.5"> 67.58 </td><td colspan="0.5"> 94.57 </td><td colspan="0.5"> 87.73 </td><td colspan="0.5"> 77.83 </td><td colspan="0.5"> 93.31 </td><td colspan="0.5"> 89.75 </td><td colspan="0.5"> 87.44 </td><td colspan="0.5"> 90.99 </td><td colspan="0.5"> 83.54 </td><td colspan="0.5"> <strong>87.25</strong> </td><td colspan="0.5"> 4 seasons</td></TR>
</TABLE>
<p>
Version Notes:
<p>
<UL >
<li> <em>1.19.10</em>: 22,000 scans, cluster size 50.
<li> <em>1.19.13</em>: 40,000 scans, cluster size 50. Switched the abs-ticks-from-firetime to use a "Triweight" instead of "Triangle" distribution. (Basically, more heavily weighting scans closer to fire time. See <a rel="nofollow" href="http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/AV0405/MISHRA/kde.html">[Kernel Density Estimators]</a>.) Misc tweaks to distance function.
<li> <em>1.19.15</em>: Entropy-based dynamic weighting on <a href="robowiki@DynamicClustering" class=wikipagelink>DynamicClustering</a> attributes. Keeps a singly segmented <a href="robowiki@VisitCountStats" class=wikipagelink>VisitCountStats</a> style buffer for each attribute, solely for calculating entropy. Each attribute has 3 segments, evenly distributed across the domain. Attribute with max information gain is weighted 5, with others scaled linearly such that 0 info gain would be weighted 1. All 13 attributes enabled: lateral velocity, advancing velocity, distance, wall distance, wall distance reverse, accel, distance last 8 ticks, distance last 15 ticks, distance last 25 ticks, time since velocity change, time since zero velocity, time since max velocity, abs ticks from aiming time (2 offset from fire time).
<li> <em>1.19.16</em>: Uses "good" segments instead of evenly distributed ones; not all attributes are split into the same number of segments. Max weight is 7 instead of 5.
<li> <em>1.19.20</em>: Added two more attributes: turn rate and distance last 60 ticks. Misc tweaks to existing attributes. Dynamic weights now exactly (still linearly) proportional to the information gain - attribute with 0 info gain would be weighted 0. Back to the Triangle distribution for the fire time element of <a href="robowiki@KernelDensity" class=wikipagelink>KernelDensity</a> (i.e., increasing weights of non-firing waves) and one small tweak to the <a href="robowiki@KernelDensity" class=wikipagelink>KernelDensity</a> method.
<li> <em>1.19.24</em>: Dropped 5 attributes: distance last 15 ticks, distance last 25 ticks, time since velocity changed, time since max velocity, and turn rate. Forgot I'd left this in there - using Cosinus distribution instead of Gaussian for the <a href="robowiki@KernelDensity" class=wikipagelink>KernelDensity</a>. (Not sure this matters much at all...) Dimension weights used by the gun are a running total of weights that are calculated once per shot, trying to take mutual information into account.
<UL >
<li> For each attribute, find 50 closest scans among last 1,000, using only that attribute in the distance formula; calculate the entropy of the <a href="robowiki@GuessFactors" class=wikipagelink>GuessFactors</a> returned (sliced into a <a href="robowiki@VisitCountStats" class=wikipagelink>VisitCountStats</a> bin); and find the info gain (from maximum entropy); this info gain is the initial weight for that attribute in this calculation.
<li> Then, for each combination of two attributes, again find 50 closest scans among last 1,000, using only these two attributes in the distancing function; find the entropy and info gain (infoGainCombo) of the resulting <a href="robowiki@GuessFactors" class=wikipagelink>GuessFactors</a>; multiply both attributes' weights by ((infoGain1 + infoGain2) / infoGainCombo). E.g., if infoGain1 == infoGain2 == infoGainCombo, then nothing is gained from using both attributes vs using either one (i.e., they are measuring the same thing), so their weights are cut in half. <em>I have no idea if this should scale linearly like this, but this value is almost always between .5 and 1, so I think this is at least somewhat sound.</em>
<li> Loop through the (temporary) weights on each element, find the max, and then divide them all by the max, for normalization. This is so that one calculation matters as much as the next one.
<li> Add this temporary weight to the actual weight for each element.
</UL>
<li> <em>1.19.32</em>: Turned off all weighting, to serve as a baseline comparison for 1.19.33. Custom scaling for many attributes - e.g., third root of <a href="robowiki@AdvancingVelocity" class=wikipagelink>AdvancingVelocity</a>, the portions from 0-1 and 7-8 count double in <a href="robowiki@LateralVelocity" class=wikipagelink>LateralVelocity</a>, and decelerating values for accel are halved. Returned to Gaussian distribution in <a href="robowiki@KernelDensity" class=wikipagelink>KernelDensity</a>. Adjusted the <a href="robowiki@GuessFactor" class=wikipagelink>GuessFactor</a> bandwidth in the <a href="robowiki@KernelDensity" class=wikipagelink>KernelDensity</a> calculation to try and account for an issue <a href="robowiki@David_Alves" class=wikipagelink>David</a> made me aware of. Returned to Gaussian distribution for <a href="robowiki@KernelDensity" class=wikipagelink>KernelDensity</a>.
</UL>
<p>
<hr noshade class=wikiline size=1>
<p>
Some info on the above:
<p>
<UL >
<li> Based on <a href="robowiki@Dookious" class=wikipagelink>Dookious</a>, so inherits the nicely polished wave handling and <a href="robowiki@VirtualGuns" class=wikipagelink>VirtualGuns</a> systems and all other non-stats stuff.
<li> I've been toying with a "Main Gun" and an "<a href="robowiki@AntiSurfer" class=wikipagelink>AntiSurfer</a> Gun", but I am dropping the latter for now, for a couple of reasons: first, non-surfers are far more important to focus on at first with a gun; second, a DC gun tends to do OK against surfers anyway (note that <a href="robowiki@Shadow" class=wikipagelink>Shadow</a> only has one gun).
<li> 1.19.10 is just Main Gun, with 22,000 scans and a cluster size of 50.
<li> <a href="robowiki@KernelDensity" class=wikipagelink>KernelDensity</a> (among closest scans) has two elements: 
<UL >
<li> First dimension is the difference in <a href="robowiki@GuessFactors" class=wikipagelink>GuessFactors</a>, Gaussian distribution with a bandwidth of half a bot width (much like <a href="robowiki@Chalk" class=wikipagelink>Chalk</a> and old <a href="robowiki@Lukious" class=wikipagelink>Lukious</a>).
<li> Second dimension is what I call "absolute ticks to fire time", which is min(time since bullet fired, time until gun cooled), with (1 - (absTicks / 9)) (I guess this is called a "Triangle" distribution).
</UL>
<li> Scan distance formula is Euclidean (square root(sum of squares)) distance with <a href="robowiki@LateralVelocity" class=wikipagelink>LateralVelocity</a>, <a href="robowiki@AdvancingVelocity" class=wikipagelink>AdvancingVelocity</a>, distance, <a href="robowiki@WallDistance" class=wikipagelink>WallDistance</a> (forward and reverse), distance last eight ticks, time since velocity change (divided by bullet time), and abs ticks to fire time. Right now, all with intuitive (static) weights. (No, I don't actually do the square root on all of them, only the closest ones once I find them. :P)
</UL>
<p>
A couple key speed improvements I've learned along the way:
<UL >
<li> Don't have any sin's or cos's in your distance formula. =) Kinda obvious, but it's easy to forget what's behind that "getLateralVelocity()" method call.
<li> I was inspired by a <a href="robowiki@WaveSurfing" class=wikipagelink>WaveSurfing</a> related tip from <a href="robowiki@Krabb" class=wikipagelink>Krabb</a> and found another excellent improvement: pass the current "max distance" to your scan distancing method as you're iterating through your scans, calculate your highest weighted factors first in the distancing method, check if you've already passed the max distance a few times throughout and just cut off if you have. I was able to increase from ~25,000 to ~40,000 scans with a first pass at this trick.
<li> Keeping the list of closest scans sorted when generating them is really good (learned from Corbos' Chalk, he may have learned from ABC's DCBot). It's still O(n = cluster size) to update your maximum distance among your closest scans, but it averages to probably (n/2) or less if you keep it sorted, I think. <em>Note: upon reviewing things, this doesn't matter as much as I thought!</em>
</UL>
<p>
-- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
<p>
<hr noshade class=wikiline size=1>
<p>
What exactly do you mean by "keeping the list of closest scans sorted"?  Closest in terms of match closeness, time, or what? I'm not seeing how any of those gives you a speedup, you still have to check all stored scans, right? --<a href="robowiki@David_Alves" class=wikipagelink>David Alves</a>
<p>
Ok, my bad for being so terse. Yes, match closeness. And yes, you still have to check all the scans. It's just one element - the updating of maximum distance among the closest scans - that is sped up here. As you're iterating through the 20,000 (or whatever) total scans, you need to keep track of what the maximum distance in the closestScans collection is, so that you can check if the distance for the current scan (in the loop through the 20,000) is less than that maximum; if it is, you sub the new scan into the closestScans array and then update the new maxDistance. I used to just iterate through all 50 elements in closestScans to find the maximum again after I changed one out. Now, I keep the closestScans list sorted by distance; if a new scan has a distance &lt; maxDist, I start from the end of closestScans, shuffle the existing scans up, and insert the new scan into the correct spot. So maxDistance is just the distance on the last element in closestScans.
<p>
So you have far fewer total iteretions in all those recalculate-maxDistance loops and a lot fewer data reads, but a lot more data writes (updating references in closestScans). I actually wouldn't be 100% sure off the top of my head which "should be" worse, but I was able to go from ~10,000 to ~25,000 scans without skipping turns after I made that change.
<p>
-- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
<p>
Thanks for the update!  I know that the non-surfer scores are way more important, but improving the surfer scores is so fun!  I don't understand the whole Gaussian distribution thing, I may have to look into that, just to learn what it means.  But a note ... keeping your cluster sorted could result in O(log n), if you used a tree instead of an array to store them. -- <a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
<UL >
<li> Or better yet, a heap! -- <a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
<li> Good idea! I'll look into it. -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
<li> For what it's worth, I greatly overestimated the value of optimizing that portion of the getClosestScans<a href="robowiki@action=edit&id=ClosestScans" class=wikipageedit>?</a> method, anyway. =) -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
</UL>
<p>
Added another nice speed optimization to my list of tips above, took me from 25k to 40k scans. -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
<p>
Added info for 1.19.20 and noted for 1.19.15 that I'd enabled a bunch of attributes that weren't previously. I think all these extra attributes might be a problem - some of them have mutual information, yet they are being weighted individually, as if they are all independent variables. Thus in 1.19.21, 5 of them are disabled. Also, the entropy based weights in 1.19.21 are not quite linear (Math.pow(x, 0.75), not quite square root either). Fingers crossed =) I know entropy is a widely used way of judging what we want to judge - the information gain of a specific attribute in a data set - but I'm starting to doubt it is really what I want to use to determine my dynamic weights. I'll stick with it a little longer... -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
<p>
<UL >
<li> Another thing I want to try, very similar to something <a href="robowiki@Simonton" class=wikipagelink>Simonton</a> has mentioned: instead of measuring total entropy of a segmented <a href="robowiki@VisitCountStats" class=wikipagelink>VisitCountStats</a> buffer, take the entropy of a closest scans cluster found with just that attribute; then the weight for that attribute could be a <a href="robowiki@RollingAverage" class=wikipagelink>RollingAverage</a> of the information gain (measured vs maximum entropy or an unsegmented buffer) each time I do that. (You'd still have to cut the <a href="robowiki@GuessFactors" class=wikipagelink>GuessFactors</a> into bins to get the entropy.) It should be roughly as expensive as aiming to do this for all attributes - both would compute distance for each attribute across all scans - so I could just do it on a different tick. Even limiting it to like past 1,000 scans could work just as well. It would also be interesting to see if this really gives any different results from my current setup. -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
<li> This would still have the issue with mutual information skewing the overall weights - e.g., dist last 8 ticks and time since zero velocity probably measure many of the same situations the same way, so weighting them each by individual entropy will net you more weighting than you want. But if you did limit this part to 500 or 1,000 scans (instead of 40,000), that might be enough time to do some fancy <a rel="nofollow" href="http://en.wikipedia.org/wiki/Mutual_information">[mutual information]</a> calculations in there, as well. At first glance, that seems much easier in this setup than in the <a href="robowiki@VisitCountStats" class=wikipagelink>VisitCountStats</a> buffers setup, where you'd need every combination of two-segment buffers in order to track / calculate mutual information. Hmm! -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
<UL >
<li> Umm, or would you? I may need to get out the pen and paper tonight to strengthen my grasp of entropy and such. =) -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
</UL>
<li> What attributes do you plan to segment across within these clusters?  Or by "an unsegmented buffer" do you mean a buffer of all scans...? -- <a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
</UL>
<p>
I dunno if i understand DC-guns correctly, but what about segmenting your scans (or should i say clustering :) )? Searching over ~20k scans gives me a headache :/ You wrote something about sorting your scans above, just ignore this post if you meant exactly this... I think it could be done in the same way like we segment our GF-stats: Put every scan in a multidimensional array (with as many dimensions as you have attributes, a multidimensional array of ArrayLists<a href="robowiki@action=edit&id=ArrayLists" class=wikipageedit>?</a> would do the job). If you want to find the closest scan to your current scan, just search in segments around the segment in which the current scan is located. That should save you alot of needless searching :D You could first calculate the distance of your current scan to the "middle" of each nearby segment (I hope you get what i mean) and than search in all segments whith a short distance. May be it is faster to store your scans in a tree structure, but I don't know much about woods :P --<a href="robowiki@Krabb" class=wikipagelink>Krabb</a>
<UL >
<li> Hmm ... this idea could be just what we need to make room for more serious analyses of the data (every firing tick)! -- <a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
<li> On second thought, let's see ... 26,000 scans, we'll say 5 dimensions ... 11,881,376,000,000,000,000,000 array positions, 46 bytes per scan ... 497,078,232,001.5 terabytes of memory.  Maybe that's why we don't do that ...  But we could do it in, like, 2 dimensions to perhaps cut off totally wrong scans ... -- <a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
<li> I think you got me wrong, we dont need one array positions for each scan in each dimension. The idear was to put similar scans in one segment. If you have three attributes (=3 dimensions): distance, speed and acceleration, and you devide ech dimension in 5 parts you would have 5^3= 125 array positions. Ech position is one <a href="robowiki@ArrayList" class=wikipagelink>ArrayList</a> of scans (instead of your bin-array in a gf gun). You would store your scan attributes and your gf(or whatever you use for aiming) in each "scan" class. You need to calculate the distance of your new scan (which should be used for aiming) to each segment in order to skip all scans in segments which are far away. --<a href="robowiki@Krabb" class=wikipagelink>Krabb</a>
<li> (Edit Conflict) I don't think that's quite right. From what I understand, it would be 5 dimensions ^ 4 slices each (or whatever you decide), like current <a href="robowiki@VisitCountStats" class=wikipagelink>VisitCountStats</a> guns. But instead of an array of doubles, you'd have an array of scans. Then, to find the closest scans, you wouldn't search your whole backlog - just findthe segment that matches the current scan, then search that one and all the neighboring groups for the closest scans. You're assuming the closest scans will always be close in the segmentation, which is probably true. It might work really well! -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
</UL>
<p>
kd-trees (<a rel="nofollow" href="http://en.wikipedia.org/wiki/Kd-tree">http://en.wikipedia.org/wiki/Kd-tree</a>)@ --<a href="robowiki?Corbos" class=wikipagelink>Corbos</a>
<UL >
<li> mom :) -<a href="robowiki@Krabb" class=wikipagelink>Krabb</a>
<li> wow. -- <a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
<li>Yes, but a simple array would probably be faster. As we don't want to sort the scans entirely. --<a href="robowiki@Krabb" class=wikipagelink>Krabb</a>
<li>Wowie, that is quite a tree. Its like it was made for Clustering. --<a href="robowiki@Chase-san" class=wikipagelink>Chase-san</a>
<li> Krabb - you think arrays could do it faster than O(log n)? -- <a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
<li> Hmm, i don't know much about such things (for now) :) But inserting a new scan would be independent of n. I can't say much about searching, because it depends on the number of scans in each segment wich is dependent on the number of slices in each dimension. But i think it is faster! But you could use a tree for each array point (instead of the proposed <a href="robowiki@ArrayList" class=wikipagelink>ArrayList</a>), wich should speed things up a bit. --<a href="robowiki@Krabb" class=wikipagelink>Krabb</a>
<li> If you assume, that the scans are distributed steadly and that the closest scan is in the neighboring segments, you should get  O(log(n/slices^dimension)*3^dimension) for the seach (if you use trees for each array point), wich should be faster :). But the closest scan is not necessarily in the 9 neighboring segments and the scans are not distributed steadly... --<a href="robowiki@Krabb" class=wikipagelink>Krabb</a>
</UL>
<p>
Surprisingly, the methodology I use in 1.19.24 is not that much code or that ugly. It is about as intensive as aiming. With 10 attributes, I'm doing 54 getClosestScans (10 with one attribute, 44 with two), cluster size 50 and log size 1,000, and an equal number of entropy calculations. The results are nothing too impressive, though. My next test is using this system for the info gain but not doing all the mutual information stuff - this also lets you use much bigger log size for the initial information gain calculation. -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
</div><hr class=wikilinefooter>
<div class=wikifooter><form method="post" action="robowiki" enctype="application/x-www-form-urlencoded">
<a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@Lukious" class=wikipagelink>Lukious</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<a href="robowiki@action=edit&id=Lukious/Rewrite" class=wikipageedit>Edit text of this page</a> | <a href="robowiki@action=history&id=Lukious/Rewrite">View other revisions</a><br>Last edited September 29, 2007 17:10 EST by <a href="robowiki@Voidious" title="ID 8561 from cpe-204-210-154-119.hvc.res.rr.com">Voidious</a> <a href="robowiki@action=browse&diff=1&id=Lukious/Rewrite">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /></form></div>
</body>
</html>