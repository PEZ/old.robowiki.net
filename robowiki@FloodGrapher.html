<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD><TITLE>FloodGrapher - Robo Wiki -= Collecting Robocode Knowledge =-</TITLE>
<META NAME='KEYWORDS' CONTENT='Flood, Grapher'/>
<LINK REL="stylesheet" HREF="/robodocs/wiki.css">
</HEAD><BODY BGCOLOR="white">
<div class=wikiheader><h1><a href="robowiki@Robo_Home"><img src="/images/RoboWiki.png" alt="[Home]" border=0 align="right"></a><a href="robowiki@back=FloodGrapher">FloodGrapher</a></h1><a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<hr class=wikilineheader></div><div class=wikitext><a href="robowiki@FloodGrapher/FirstVersion" class=wikipagelink>/FirstVersion</a> <a href="robowiki@FloodGrapher/Design" class=wikipagelink>/Design</a> (if anyone cares) <a href="robowiki@FloodGrapher/TroubleShooting" class=wikipagelink>/TroubleShooting</a>
<p>
<hr noshade class=wikiline size=1>
<p>
<a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> 2.0 is now released!  Here's a screen shot of the released version on my computer:
<p>
<img src="http://students.cs.byu.edu/~kawigi/robots/fg20screenshot.png">
<p>
Download it from the <a href="robowiki@RobocodeRepository" class=wikipagelink>RobocodeRepository</a>: <a rel="nofollow" href="http://www.robocoderepository.com/BotDetail.jsp@id=2027">http://www.robocoderepository.com/BotDetail.jsp?id=2027</a>
<p>
Versions since <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> 2:
<UL >
<li> Version 2.0 - first version using Swing and the new, fully pluggable design.  Features <a href="robowiki@FloodGrapher/FloodScript" class=wikipagelink>/FloodScript</a> configuration files in a format I just made up.  Modules that came with it:
<UL >
<li> Segmentations / grapher segmentations: distance, bullet flight time, lateral velocity, acceleration, walls
<li> Movements: <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a> movement (not quite equivalent, but close), FhqwhgadsMovement<a href="robowiki@action=edit&id=FhqwhgadsMovement" class=wikipageedit>?</a> (same), an oscillating movement I was experimenting with, stationary.  The moving movements take a parameter for the distancing algorithm (dynamic or static within a given range).
<li> Energy Management: <a href="robowiki@FloodHT" class=wikipagelink>FloodHT</a> 0.8 power, <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a> power (same as I use in several bots), power 3 only.
<li> File formats: <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> format (for the robot that comes with it), <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a> 1.4 format, "dummy" file format (for files you can't read but want to delete periodically)
<li> GUI plugins - the Grapher (of course), plugin manager, FloodScript<a href="robowiki@action=edit&id=FloodScript" class=wikipageedit>?</a> editor, codesize monitor, help browser (most help files so far are for extending <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a>, more to come hopefully).
</UL>
<li> Version 2.1 - soon to come.  Time for some bug fixes, a few more little options that might help people testing and also getting it to run more stably, I'm planning on two new GUI parts - one that runs test battles (basically done) and an ELO calculator (not sure how many features I'll cram in there yet, I might make it a simple spreadsheet sort of program to calculate your projected rating from results against several bots, maybe with the option to download current rankings from the RR@H).  I also plan on including new file formats people have implemented, Wodan and <a href="robowiki@StatistRobot" class=wikipagelink>StatistRobot</a> and whatever else seems appropriate, as long as their authors don't object.  And any others I can coax people into writing soon.  Any other utilities / modules that should be included here? -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
</UL>
<p>
<H2>About <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> 2.0:</H2>

<p>
<a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> is a graphing utility to help people optimize their movement against <a href="robowiki@GuessFactorTargeting" class=wikipagelink>GuessFactorTargeting</a>.
<p>
<H4>The roots of <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a></H4>

<p>
The first <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> was a hack to look at the data files saved by <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a> 1.3.  I originally made it to both debug <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a>'s gun and <a href="robowiki@FloodHT" class=wikipagelink>FloodHT</a>'s movement.  I made small changes to it a few times, <a href="robowiki@Jim" class=wikipagelink>Jim</a> started using it, and eventually I released a version that has since become probably more widely used than <a href="robowiki@Iiley" class=wikipagelink>Iiley</a>'s <a href="robowiki@SmogPainter" class=wikipagelink>SmogPainter</a>, and became the base of <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>'s <a href="robowiki@RoboGrapher" class=wikipagelink>RoboGrapher</a>.  It was sloppily coded and not really meant to do anything besides read <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a>'s data, but the options available made it one of the most useful robot development tools available.  The main disadvantage as it gained usage is that <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a> became "The Test Bot" - every new robot would spend thousands of rounds fighting <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a> before even being tested against other bots, which meant that many bots were somewhat optimized specifically against <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a>, which doesn't do much for <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a>'s ratings :-p.
<p>
<H4>Version 2.0</H4>

<p>
This is the version of <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> that is meant to be <em>used</em>.  As useful as the original was, it wasn't really written to be used by other people, and it lacks extensibility.  The new graphing utility was completely written from the bottom up as basically a new program under the same name (but a different package), and it will hopefully grow to become the ultimate Robot development utility (and won't be bound to <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a>, so hopefully people will stop releasing bots that beat it.  Fat chance, eh?)
<p>
<H4>Installation</H4>

<p>
To install <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a>, just extract it into your robot directory.  It will extract most of its files into kawigi\tools\ and kawigi\resource\, and then it will leave a .sh file and a .bat file in the robot directory to run the program.  The startup files assume that robocode.jar and codesize.jar are in the parent directory of the robots directory where <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> was extracted, so if that's not the case, you'll have to change the script you use.
<p>
<H4>Support for Multiple Graphs</H4>

<p>
Any number of graphs can be displayed on the new <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> at the same time, on top of each other.  These graphs could be on different segments and come from different bots.
<p>
<H4>Extensibility / Plugin support</H4>

<p>
This version was also made with extensibility in mind.  It has a plugin interface which can be made to make it open files saved by other robots.  All you need to do is write a class that manages the UI for each segmentation axis and one to open the file and convert it to a data object (which mostly involves converting the data into a multi-dimensional array of doubles and saying what order the segmentations are in by creating the other objects).  I suspect it will take about 30 minutes to an hour for most people, depending on how familiar they are with Swing components and GUI design.  I recommend taking a look at how I did it with <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a> to help you get started.  Hopefully, a lot of people will write modules for it, while they're at it.
<p>
Aside from file formats, there is also a plugin interface for the GUI, allowing people to write useful little tools and integrate them with <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a>.
<p>
<H4>A New Robot</H4>

<p>
A new robot (which has been designed but not yet written) will come with the grapher and will probably be the most readily configurable robot ever written.  It will have a config file that can be used to change distancing, movement, energy management, and data segmentation.  New segmentations, movements, and power management schemes can be written and added to the robot without changing or recompiling the robot.  They are configured by editing the robot.ini file in its data directory, using <a href="robowiki@FloodGrapher/FloodScript" class=wikipagelink>/FloodScript</a>, <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a>'s configuration "language".
<p>
<H4>Other utilities?</H4>

<p>
There is room for more modules and utilities to be built into <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a>.  Included with it currently are:
<p>
<UL >
<li> The Grapher (of course)
<li> A plugin configurator
<li> A FloodScript<a href="robowiki@action=edit&id=FloodScript" class=wikipageedit>?</a> editor (edit the <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> configuration language with text hilighting and everything :-) )
<li> A Codesize monitor (open your classes and hit refresh to see their new codesize - now you don't need to open the console to do it)
<li> A Help browser (I wouldn't mind someone going through and editing the HTML help files to make it more complete, I tried to document the most confusing parts myself)
</UL>
<p>
In the future, I could see such expansions as:
<p>
<UL >
<li> <a href="robowiki@DynamicDistancing" class=wikipagelink>DynamicDistancing</a> grapher
<li> Automatic tweaker
<li> Automatic <a href="robowiki@TargetingChallenge" class=wikipagelink>TargetingChallenge</a> or other test runs built in
<li> Whatever people feel like they need to improve their bots
</UL>
<p>
Please feel free to give suggestions, ask questions, etc. here on the wiki.
<p>
<H4>A Request</H4>

<p>
Now, I have one simple request for those that have used <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> and will use this one - please contribute!  If you're testing and you write your own file format classes for your own robots, send them over.  If you have an idea for a GUI module, try writing it and send it my way for the next release.  If you find little problems, report them, or even fix them yourself and tell me how you did it.  If you're experimenting with new segmentations, submit them for the next release.  Many such things could be added with very little effort, just as you see the need for them.
<p>
On a side, just because I'm curious, let me know if you've used it and what robots' movement has somehow been a product of <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a>, maybe on a page like /Users<a href="robowiki@action=edit&id=FloodGrapher/Users" class=wikipageedit>?</a>.
<p>
<hr noshade class=wikiline size=1>
<p>
<H4>Comments / Questions</H4>

<p>
What can I say. This might be the most useful fat client tool for us bot makers sinse <a href="robowiki@RoboLeague" class=wikipagelink>RoboLeague</a>! Thanks for giving all this time away to us for free. -- <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>
<p>
Very nice!  I am using it right now to desgn my next MX movement. :-)  I'll release a self-graphing tool to go with it in a few days time (it'll probably use the Flood 1.4 data format though... lazy. :p ) -- <a href="robowiki@Jamougha" class=wikipagelink>Jamougha</a>
<p>
Will it use the same segmentation as <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a> 1.4? -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
Wow, this is the first tool I've been able to get to work to help test bots. This is awesome. Hmm, Immortal's movement isn't THAT bad. -- <a href="robowiki@Alcatraz" class=wikipagelink>Alcatraz</a>
<p>
Yes, for now at least.  Although I may use a much less strict wall approach segment.  If I change the segmentation then I'll write my own plugin.  (It might be cool to have one segment represent waves, and another real bullet hits, so you can see if a bot is picking up on a segment or not...)  -- <a href="robowiki@Jamougha" class=wikipagelink>Jamougha</a>
<p>
Hmmm... I was thinking about building an option like that into the <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> robot, too. -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
The Repository did something screwy with it, so I uploaded it again and updated the link at the top of the page.  I also took the liberty of making a couple minor bugfixes. -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
I'm trying to make a fileformat plugin for Recrimpo, and have reached the limit of my java knowledge.  I have my stats in an int array, you want it in a double array, and apparently:
<p>
"An expression of type "int[][][][]" cannot be cast into type "double[][][][]""
<p>
Do I have to use nested for loops and convert each int separately, or is there a better way? Thanks. -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
Second question: When adding the different segments to the scheme, do you just ignore the GF segment?  If so, does it do the conversions from indexes to GFs automatically? -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
Added <a href="robowiki@Narcissus" class=wikipagelink>Narcissus</a> to the repository.  <a href="robowiki@Tango" class=wikipagelink>Tango</a>, I think you're supposed to create your own plugin for Recrimpo.  No idea how that works, though. :-) -- <a href="robowiki@Jamougha" class=wikipagelink>Jamougha</a>
<p>
Yes, I know, that's what I'm trying to do.  I've got everything done, except for the converting to doubles bit.  I could do it using for loops, but that would be very ugly, so I would like to avoid it if possible. -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
What's ugly about using loops? I think it's the only way to do this, but you might find methods to use in the Arrays class.  Look it up in the <a href="robowiki@JavaAPI" class=wikipagelink>JavaAPI</a>. -- <a href="robowiki@PEZ" class=wikipagelink>PEZ</a>
<p>
I've gone and done it using for loops for now, but have 2 problems.  1) It won't let me select the top option for any of the segments (after i've select something else) 2) It doesn't display the graph, which is something of a major flaw.  I've just modified the segments that came with it, so I can't see anything that would cause problem 1, and I can't think of anything that would cause problem 2 either. -- <a href="robowiki@Tango" class=wikipagelink>Tango</a> (PS You can download it here:<a rel="nofollow" href="http://www.robocoderepository.com/Controller.jsp@submitAction=downloadClass&amp;id=2029">[1]</a>)
<p>
Yeah, you need to basically copy your array into an array of doubles if you save an array of ints.  Look at FloodMini14Format<a href="robowiki@action=edit&id=FloodMini14Format" class=wikipageedit>?</a>.java tp see a good general-purpose way to do it.  And your assumption is correct that you don't need to put a segmentation in your scheme for the guess factors, because I want to have an array left to display.  About it not displaying - it displays fine for me, but it won't actually show up until you generate an event (hit the refresh button or change one of the selection boxes or something).  I suppose this is a sort of weakness that I should address.  Another is that it throws a null pointer exception if no segments are selected.  But on that note, it appears to be throwing that exception in your velocity segmentation if I try to select segments with velocity more than 3 or something.  As far as not letting you select the top option, I only see that with max distance, which should never be 0 anyways (and it looks like you can't select it because when you do it gets that <a href="robowiki@NullPointerException" class=wikipagelink>NullPointerException</a>).  So stuff for me to fix here, too... -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
Strange... you're seeing different things to me.  I've tried refreshing it, etc. and it still displays nothing, and I can't select any of the top options.  I guess I'll do some more testing, and look more closely at the CLI. -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
It's displaying fine now... strange... it is throwing a lot of exceptions, I need to look into that... thanks for your help. -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
It seems the grapher isn't receiving any data.  The data is definitely there, because it get's displayed sometimes, and the only stuff my code does is sort out the segmentation, so I can't see how anything I've done could make graph.getData() return null, yet your graphs work fine, which indicated your code works.  It's all confusing me... I'll look again tomorrow when I'm less tired. -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
But mine also get the <a href="robowiki@NullPointerException" class=wikipagelink>NullPointerException</a> in rare cases - but only if you pick a maximum distance or BFT segmentation that is less than or equal to the minimum.  As far as what causes problems with your other segmentations, I'm just not sure what's going on :-\ -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
Has anyone else had a go at this yet?  Tomorrow I will make a plugin for <a href="robowiki@Falcon" class=wikipagelink>Falcon</a> (i'll have to add saving to it), that should be as simple as I can get.  Start simple, and work up,  is one of the best ways to find where it goes wrong. -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
<p>
<hr noshade class=wikiline size=1>
Any body intrested in BeanShell<a href="robowiki@action=edit&id=BeanShell" class=wikipageedit>?</a> script implemented in FLood grapher. If more people intrested in that I can code it when I have time. -- SSO<a href="robowiki@action=edit&id=SSO" class=wikipageedit>?</a>
<p>
What kinds of things do you think it would be useful for? -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<hr noshade class=wikiline size=1>
Hrm, I haven't had a good look at this yet, do you think it's possible to write a weakest segment finder that runs all the possible segment combinations and shows you your top 5 or whatever weakest segments (or all segments with peaks more than some threshold above your all segments graph)? -- <a href="robowiki@Kuuran" class=wikipagelink>Kuuran</a>
<p>
Should be easy.  I'm not sure how <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> does it all, so I'm not sure, but nested for loops to check each segment, and use the peak hit rate that it already calculates, and find the max.  I'll look into it this evening, if no-one's got their first. -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
Yeah, I think that's something worthwhile in the next version - the problem is that it will normally come up with segments that have very little data in them or something.  With the stats from <a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a> and <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a>, I can figure out how many samples are in there, but with robots using rolling averages, this isn't as obvious. -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
That's not too big of a problem, just something to be aware of when analyzing the data it gives you. Or you can always include a threshold for minimum number of samples when it's available (just have rolling average guns fill whatever method is called to determine number of samples with <tt>return -1;</tt> and add a case). For that matter, is there some reason the new grapher doesn't tell you how many samples the results you're looking at are from when the data is available? It's a bit disconcerting to not be sure whether the huge spike I see in many top movements with this new segment is just because it's a barren segment or because I can nail people hard with it.. -- <a href="robowiki@Kuuran" class=wikipagelink>Kuuran</a>
<hr noshade class=wikiline size=1>
For a segment I want to plug into <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> I need information about bullet hits on the opponent, is there any way to get at this? -- <a href="robowiki@Kuuran" class=wikipagelink>Kuuran</a>
<p>
I'm not sure I understand, can't you use the onBulletHit<a href="robowiki@action=edit&id=BulletHit" class=wikipageedit>?</a>() method? -- <a href="robowiki@Tango" class=wikipagelink>Tango</a>
<p>
% time spent in this segment would be very helpful. No sense in trying to flatten a segment that only occurs on one or two ticks in a 100 round battle. :-) --<a href="robowiki@David_Alves" class=wikipagelink>David Alves</a>
<p>
@Tango - yeah, but onBulletHit<a href="robowiki@action=edit&id=BulletHit" class=wikipageedit>?</a> requires that you modify <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a>.
<p>
@Kuuran - make up a solution and I can add it to the next version. -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
<hr noshade class=wikiline size=1>
<p>
Ok, so Im an idiot, how do I make this work? I assume I need to run a battle between my robot and some <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> test bot, but since I cant find this bot, I am not really sure how it works... -- <a href="robowiki@Jokester" class=wikipagelink>Jokester</a>
<p>
Ok, so using <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> might not be the easiest thing, but it beat the hacked-up version that people were using before that ;-)
<p>
<a href="robowiki@FloodMini" class=wikipagelink>FloodMini</a> 1.4 is a fine test bot with a <a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a> plugin (but it's not necessarily accurate, since it fires waves every scan).  The preferred way it to use kawigi.tools.<a href="robowiki@FloodGrapher" class=wikipagelink>FloodGrapher</a>, which comes in the zip file with the grapher.  Just unzip the zip file in your robots directory, and run it from there, and the robot should be there. -- <a href="robowiki@Kawigi" class=wikipagelink>Kawigi</a>
<p>
THIS IS AMAZING!  I searched for something like this before, since I figured someone had to have made it, but never found it!  Nice.  But I don't know how to use it.  I unzipped it into my robots directory, changed the .bat file to point to the new location of the robocode jars, and double-clicked the bat file.  Now it's just sitting there, looking like it should be running but not showing anything. -- <a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
<UL >
<li> Oh, wait, look at <a href="robowiki@FloodGrapher/TroubleShooting" class=wikipagelink>/TroubleShooting</a>.  Got a little further now ... --<a href="robowiki@Simonton" class=wikipagelink>Simonton</a>
<li> I graphed my <a href="robowiki@MovementProfile" class=wikipagelink>MovementProfile</a> a bit early on with <a href="robowiki@StatistRobot" class=wikipagelink>StatistRobot</a>. The weird part is that graphing a <a href="robowiki@WaveSurfer" class=wikipagelink>WaveSurfer</a> gets kinda pointless pretty quick, as your profile changes dramatically with whatever gun you're facing. As <a href="robowiki@ABC" class=wikipagelink>ABC</a> once said, you are basically controlling your profile completely. Still neat, fun to play with, and certainly very useful for certain things. -- <a href="robowiki@Voidious" class=wikipagelink>Voidious</a>
</UL>
</div><hr class=wikilinefooter>
<div class=wikifooter><form method="post" action="robowiki" enctype="application/x-www-form-urlencoded">
<a href="robowiki@Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki@Changes" class=wikipagelink>Changes</a> | <a href="robowiki@action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<a href="robowiki@action=edit&id=FloodGrapher" class=wikipageedit>Edit text of this page</a> | <a href="robowiki@action=history&id=FloodGrapher">View other revisions</a><br>Last edited August 24, 2007 12:47 EST by <a href="robowiki@Voidious" title="ID 8561 from cpe-204-210-154-119.hvc.res.rr.com">Voidious</a> <a href="robowiki@action=browse&diff=1&id=FloodGrapher">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /></form></div>
</body>
</html>