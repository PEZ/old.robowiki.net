<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD><TITLE>Pugilist - Robo Wiki -= Collecting Robocode Knowledge =-</TITLE>
<META NAME='KEYWORDS' CONTENT='Pugilist'/>
<LINK REL="stylesheet" HREF="/robodocs/wiki.css">
</HEAD><BODY BGCOLOR="white">
<div class=wikiheader><h1><a href="robowiki?Robo_Home"><img src="/images/RoboWiki.png" alt="[Home]" border=0 align="right"></a><a href="robowiki?back=Pugilist">Pugilist</a></h1><a href="robowiki?Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki?Changes" class=wikipagelink>Changes</a> | <a href="robowiki?action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<hr class=wikilineheader></div><div class=wikitext>Do tell. :-)
<p>
--<a href="robowiki?David_Alves" class=wikipagelink>David Alves</a>
<p>
Yes, sorry for just throwing it out like that, but I was dead tired. I started with the bot at midnight yesterday and when it compiled, was still and mini, and seemed to run without throwing exceptions I released it. No further testing whatsoever. That's me, in'it? Of course I don't create a top-10 material bot in two hours from thin air. This is really <a href="robowiki?Aristocles" class=wikipagelink>Aristocles</a> grown to a mini. Grown to fit <a href="robowiki?AdaptiveMovement" class=wikipagelink>AdaptiveMovement</a>. Like <a href="robowiki?Paolo" class=wikipagelink>Paolo</a>. But where <a href="robowiki?Paolo" class=wikipagelink>Paolo</a> uses the <a href="robowiki?MusashiTrick" class=wikipagelink>MusashiTrick</a> to try to balance the number of hits it allows at GF1, Pugilist uses <a href="robowiki?EnemyWaves" class=wikipagelink>EnemyWaves</a> to try avoid any GF it has recently been hit at. It uses enemy waves to avoid <a href="robowiki?HeadOnTargeting" class=wikipagelink>HeadOnTargeting</a> too, which makes it very good at that. -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<hr noshade class=wikiline size=1>
<a href="robowiki?Pugilist/HelpRequests" class=wikipagelink>/HelpRequests</a> - <a href="robowiki?Pugilist/LatestUpdates" class=wikipagelink>/LatestUpdates</a> - <a href="robowiki?Pugilist/GuessFactorChat" class=wikipagelink>/GuessFactorChat</a> - <a href="robowiki?Pugilist/ChatLog20040501" class=wikipagelink>/ChatLog20040501</a> - See also <a href="robowiki?PugilistGL" class=wikipagelink>PugilistGL</a>
<hr noshade class=wikiline size=1>
<H4>What's special about it?</H4>

It's the first <a href="robowiki?MiniBot" class=wikipagelink>MiniBot</a> doing <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a>.
<p>
<H4>How competetive?</H4>

Quite so.
<p>
It's the only <a href="robowiki?MiniBot" class=wikipagelink>MiniBot</a> having breaken the 2K barrier in the general class of <a href="robowiki?RoboRumble" class=wikipagelink>RoboRumble</a>@Home. 2007 points for version 2.0.8.
<p>
It's #8 in general rumble. #1 in mini rumble! 
<p>
In fact in minirumble it beats all opponents. Making it a <a href="robowiki?PremierLeague" class=wikipagelink>PremierLeague</a> king there. It not only beats them actually it beats them on average by 81.58%! Check it out: <a rel="nofollow" href="http://rumble.robowiki.net/servlet/PremierLeague?game=minirumble&amp;table=2">http://rumble.robowiki.net/servlet/PremierLeague?game=minirumble&amp;table=2</a>
<p>
<H4>Where can I download it?</H4>

At the <a href="robowiki?RobocodeRepository" class=wikipagelink>RobocodeRepository</a> of course:
<UL >
<li> <a rel="nofollow" href="http://www.robocoderepository.com/BotDetail.jsp?id=2044">http://www.robocoderepository.com/BotDetail.jsp?id=2044</a>
</UL>
<p>
<H4>How does it fire?</H4>

Heavily segmented <a href="robowiki?GuessFactorTargeting" class=wikipagelink>GuessFactorTargeting</a>. Not too different from the Bee gun used in <a href="robowiki?CassiusClay" class=wikipagelink>CassiusClay</a> and <a href="robowiki?BeeRRGC" class=wikipagelink>BeeRRGC</a>.
<p>
<H4>How does it move?</H4>

It's a <a href="robowiki?RandomMovementBot" class=wikipagelink>RandomMovementBot</a> style of movement. Only, it's not random at all. It's my home grown (with good advice from <a href="robowiki?Jamougha" class=wikipagelink>Jamougha</a>) <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a>. Pugilist "surfs" the <a href="robowiki?EnemyWaves" class=wikipagelink>EnemyWaves</a> carrying real bullets. It tries to move to the least hit guess factor possible on those waves.
<p>
<H4>Why that name?</H4>

I insist in thinking that 1v1 Robocode is very much like boxing. It's about hitting well and avoid getting hit too hard too often. But <a href="robowiki?Paolo" class=wikipagelink>Paolo</a> was already taken so i decided to do <a href="robowiki?David_Alves" class=wikipagelink>David Alves</a> style naming and use the more general term.
<p>
<H4>Can I use your code?</H4>

Sure. It's packed with the bot jar file and released under the terms of the <a href="robowiki?RWPCL" class=wikipagelink>RWPCL</a>. Might be a bit dense though, since lately it has been a desperate chase for bytes in this bot.
<p>
<H4>What's next for this bot?</H4>

<OL >
<li> <strong>DONE!</strong>: Figure out how break the 2K limit in the general <a href="robowiki?RoboRumble" class=wikipagelink>RoboRumble</a>.
<li> <strong>DONE!</strong>: Grab the #1 spot in mini <a href="robowiki?RoboRumble" class=wikipagelink>RoboRumble</a>
<li> Make a cool logo
</OL>
<p>
<H4>Credits</H4>

Thanks to <a href="robowiki?Jamougha" class=wikipagelink>Jamougha</a> for helping me getting the <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a> to work. And to <a href="robowiki?Jim" class=wikipagelink>Jim</a> for reviewing the implementation and telling me he thought it must be on the right track. And to <a href="robowiki?ABC" class=wikipagelink>ABC</a> and <a href="robowiki?Axe" class=wikipagelink>Axe</a> for "baby watching" P's development. And to everyone else who have tried to help me figure. Which are quite a few!
<p>
<H4>Question / comments department</H4>

<p>
I guess the 2K clubs are not for me...
<p>
<img src="http:/robocode/uploads/pez/P1.6.4.4.png">
<p>
This P only loses to one minibot yet. Quite surprisingly this is <a href="robowiki?Tityus" class=wikipagelink>Tityus</a>. (Although, it's almost a tie.) I would have thought that the Tityus gun would be very vulnerable to P's style of <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a>...
<p>
-- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
Could you please explain what you do for the edge-smoothing protection? -- <a href="robowiki?ABC" class=wikipagelink>ABC</a>
<p>
What I would like to do is to have two or three extra bins on either side of the edges and then mirror the bins on the inside of the edge to the outside when writing to the stats array. But that won't fit in my byte starved mini. Instead I just do index = min(index, FACTORS - 2) before reading the data. That way reading the last (GF1) bin gets the next last instead and the GF1 bin weights less. Does this make any sense? How about some code...
<pre>
    double smoothedVisits(int index) {
	index = (int)Math.min(index, Pugilist.FACTORS - 2);
	double smoothed = 0;	
        for (int i = 0; i &lt; Pugilist.FACTORS; i++) {
	    smoothed += (double)visits[i] / Math.sqrt((double)(Math.abs(index - i) + 1.0));
	}
	return smoothed / Math.sqrt(distanceToTarget() / bulletVelocity);
    }
</pre>
-- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
Check this out...
<p>
<img src="http:/robocode/uploads/pez/P1.9.4.2_Ranking.png">
<p>
Now I only need 5 points and I will have fulfilled my new years promise of 2004 - <em>with a</em> <em><strong>mini</strong></em>. That would be sweeet. But how? The air is really thin this high in the ranking table nowadays...
<p>
-- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
3.76 points and 327 battles left :D --<a href="robowiki?Deathcon" class=wikipagelink>deathcon</a>
<p>
<pre>pez.mini.Pugilist 1.9.4.3b	2001.73	details	graph	228	15-5-2004:14:56</pre>
<PRE >
 --<a href="robowiki?Deathcon" class=wikipagelink>deathcon</a>
</PRE>
<p>
Looking good! What did you do? Found that Thread.sleep() bug or something? I know I know, too early to say... -- <a href="robowiki?Pulsar" class=wikipagelink>Pulsar</a>
<p>
I surely touched 2K ground a while there! I've decided to always treat that as a sign. =) Thanks for letting me know. Now it's 1991 with 426 battles. And, more importantly, I'm past <a href="robowiki?DT" class=wikipagelink>DT</a>! It's gonna be a high tensed PEZ until it's decided if it's stay there. Seems my performance against <a href="robowiki?Iiley" class=wikipagelink>iiley</a>'s PM guns has gotten worse though. P is not undefeated in mini any more. But since I know what changes I made I just might be able to correct that. Problem is, as always, byte starvation. I only have three (3!) bytes left as it is. If anyone sees where I can save some bytes, please, please let me know. Tons of thanks to <a href="robowiki?Jim" class=wikipagelink>Jim</a> who helped me save 13 bytes by being smarter about my wall segmentation. -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
I think I might have some clues to improve my wae surfing in particular and maybe wave surfing in general now. It seems that segmenting on wall proximity instead of acceleration improves performance against many pattern matchers, but degrades over all performance. This could mean that wall-segmentation works against many pattern matchers. But, more likely I think, it' is acceleration segmentation that gives these pattern matchers an easier target. I can't explain how, but my gut feeling is that the time variable involved in pattern matching somehow gets important when the target is segmenting its movement on acceleration. What do you rocket scientists out there think about this? -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
I really wish I'd know... I have made up many theories about why the PM bots perform so well against wavesurfing opponents, but none of them work as well as expected when I implement the correspondent "solution".  I also don't know what to say about your feeling regarding acceleration segmentation, if you test it further and it evolves from a "gut feeling" to a proven method, please share ;). Atm, my feeling tells me that the only way you can improve performance against good PM guns is by reintroducing some kind of random factor, slightly sacrificing dodging performance against the "typical" GF gun. -- <a href="robowiki?ABC" class=wikipagelink>ABC</a>
<p>
<UL >
<li> I think that PM guns pick up on reversing very effectively. How often do you stop and *not* change directions? I would imagine that would be a very easy pattern to recognize. It takes 5 ticks to slow and 8 ticks to accelerate back to max. A bullet can travel quite a bit of distance in that 13 ticks. The escape envelope is significantly reduced from that shorter distance. Any reduction in the escape envelope is an increase in the likelyhood of being hit. Try making four calculations on your reverse factors: one full out ahead, one full out reverse, one ahead at velocity 4, one reverse at velocity four. Maybe the slowing will break up the easily matched pattern on reverse and find you 3+ points =^&gt; -- <a href="robowiki?Jim" class=wikipagelink>jim</a>
</UL>
<p>
Hell will freeze before I do that. =) -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
1997 with 407 battles fought. 2K club better prepare a chair for Pugilist. Even if it will collect some dust while I figure out where to find the missing points. =) -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
I really thought you had it, Pug was 2001 after about 200 battles with a positive momentum. Depending on how deperate you are to make the club, i reckon you could actually tip the scales by removing a couple of your older bots (Mako, Gloomy and Frankie all have high PBI's). As they're your bots there is no reason you couldn't, it just the ethical issue you need to think about....<a href="robowiki?Brainfade" class=wikipagelink>Brainfade</a>
<p>
=) Gloomy must have been lucky. Those old bots are too dear to me for me to remove them. P must do this on his own I guess. He's like <a href="robowiki?SilverSurfer" class=wikipagelink>SilverSurfer</a> on that account. Suffering alone. -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
No pain no gain... 460 battles , 1996.83 pts... That 1.9.7b.6 looks very good, maybe u get the 2K... -- <a href="robowiki?Axe" class=wikipagelink>Axe</a>
<p>
Thanks. But what's bothering me is that I only can do it with this targeting bug in place. It's the most peculiar thing I've yet come across in my robocoding. And, I've come across one or two peculiarities. =) -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
I really understand what u are talking about, sometimes is like rc universe laws and properties conspire against the logic. -- <a href="robowiki?Axe" class=wikipagelink>Axe</a>
<p>
Well, 1989 it is now with 849 battles. I think maybe that the overload of mini battles can have dragged it down some. Seen it happen before. -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
As usual it wont last. But it sure is a nice picture (literally):
<p>
<img src="http:/robocode/uploads/pez/P1.9.9.4-110.png">
<p>
=) -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
congrats on the 2000-club by the way! Well done!!! -- <a href="robowiki?Pulsar" class=wikipagelink>Pulsar</a>
<p>
Contgrats from me too. <strong>Way cool !!!</strong> --<a href="robowiki?Deathcon" class=wikipagelink>deathcon</a>
<p>
Thanks! Now this is my road map:
<OL >
<li> Push <a href="robowiki?Pugilist" class=wikipagelink>Pugilist</a> a few points higher, making it a stable member of The2000Club despite the drop in points from all those mini battles.
<li> Create a <a href="robowiki?MegaBot" class=wikipagelink>MegaBot</a>, <a href="robowiki?CassiusClay" class=wikipagelink>CassiusClay</a>, with the explicit goal to dethrone <a href="robowiki?RaikoMX" class=wikipagelink>RaikoMX</a>. It has been allowed to rule alone for too long time now. =)
</OL>
<p>
I know step 2 there can be a too hard for me, but I think I must try. One thing is for certain; If I don't try it I won't make it. Lacking <a href="robowiki?Jam" class=wikipagelink>Jam</a>'s talent I can only answer with hard work and persistance. And I've got plenty of the latter. =)
<p>
-- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
What can I say? Congrats!!  A truly incredible ranking from a mini.  I look forward to duking it out with Cassius. ;-) -- <a href="robowiki?Jamougha" class=wikipagelink>Jamougha</a>
<p>
Thanks. It'll be like "old times". Only this time I hope to end up the winner. =) -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<hr noshade class=wikiline size=1>
After i cribbed your gun, i changed the firing condition so it's something like:
<pre>(robot.getEnergy()&gt;2||robot.getEnergy()&gt;target.energy||(!target.isFiring()&amp;&amp;robot.getEnergy()&lt;target.energy))</pre>
And in the (few) tests i did, it seemed to give a small rise in overall score, it especially seems to help against iileys bots... --<a href="robowiki?Brainfade" class=wikipagelink>Brainfade</a>
<p>
Yes, I think there is a bit more bullet damage as a result. Can't fit it in Pugilist, but I'll keep it in mind with <a href="robowiki?CassiusClay" class=wikipagelink>CassiusClay</a>. Thanks! -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
<hr noshade class=wikiline size=1>
PEZ, do you mind me introducing a wiki bot featuring the <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a> of Pugilist and a Moebius style PM-gun? As most <a href="robowiki?WaveSurfers" class=wikipagelink>WaveSurfers</a> have problems with PM-gun, i am curious how high this bot will rank. --<a href="robowiki?Loki" class=wikipagelink>Loki</a>
<p>
Of course I don't mind. I'm as curious as you are about the results! -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
Ok. I think i will have a version ready this evening. How do you like the name "wiki.mini.<a href="robowiki?FeederOfRavens" class=wikipagelink>FeederOfRavens</a>" ? --<a href="robowiki?Loki" class=wikipagelink>Loki</a>
<p>
Ravens? Still in norse mythology land? =) feeder of ravens is cool. But feeder of vultures would be more videly understood I think. -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
yes, still in norse prose land. Although 'kennings' are known in Dutch too. I thought using a kenning would be a nice idea for a mostly Swedish bot (and so i can keep the norse gods 'exclusively' for the bvh.* series of bots =) ).
<p>
The basic version is 'clean compiled'. Pugilist set-up is quit clean for a mini, i could quite easily add the PM-code! I will now run some tests and upload it soon. --<a href="robowiki?Loki" class=wikipagelink>Loki</a>
<p>
It's out! Cool! -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
Yes. Let's see where it ends up. --<a href="robowiki?Loki" class=wikipagelink>Loki</a>
<p>
<H3>Shrinking help</H3>

The difference in rating between 2.4.03 and 2.4.14 is quite striking; 1977 vs 1959. Yet all there should be to it is a failed attempt at shrinking. Here's the relevant .03 code:
<pre>
	static Point2D wallSmoothedDestination(Point2D location, double direction) {
		Point2D destination = new Point2D.Double();
		int tries = 0;
		while (tries &lt; 2) {
			double currentSmoothing = 0;
	        	while (currentSmoothing &lt; 100 &amp;&amp; !fieldRectangle.contains(destination = project(location, absoluteBearing(location, enemyLocation) -
        			direction*(Math.PI / 2 + 0.2 - (currentSmoothing++ / 100.0)), enemyDistance / 5.0)));
	        	direction -= direction;
	        	tries++;
	        	if (currentSmoothing &lt; 45) {
	        		break;
	        	}
		}
		return destination;
	}
</pre>
And here's the .14 code:
<pre>
	static Point2D wallSmoothedDestination(Point2D location, double direction) {
		Point2D destination = new Point2D.Double();
		int triesLeft = 1;
		double currentSmoothing;
		do {
			currentSmoothing = 0;
	        	while (!fieldRectangle.contains(destination = project(location, absoluteBearing(location, enemyLocation) -
        		        direction*(Math.PI / 2 + 0.2 - (currentSmoothing++ / 100.0)), enemyDistance / 5.0)) &amp;&amp; currentSmoothing &lt; 100);
	        	direction -= direction;
		} while (triesLeft-- &lt; 1 &amp;&amp; currentSmoothing &gt; 46);
		return destination;
	}
</pre>
Anyone that sees where these two snippets should differ in functionality?
<p>
-- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
I think the second one will only loop once in the do/whie. You set triesLeft = 1, then do..while(triesLeft-- &lt; 1). That triesLeft-- will evaluate to 1 and then decrement triesLeft. Maybe you want "triesLeft-- &gt; 0"? -- <a href="robowiki?Voidious" class=wikipagelink>Voidious</a>
<p>
{Edit conflict]First thing that catches my eye is the 'triesLeft-- &lt; 1' construction. If I understand it correctly, the do-loop will be done only once. triesLeft starts with 1, then tested if it is smaller than one and then decremented. I think that you wanted to do something like 'triesLeft-- &gt; 0'  -- <a href="robowiki?GrubbmGait" class=wikipagelink>GrubbmGait</a>
<p>
Just in case you didn't know it, --triesLeft will decrease and then use that value in your evaluation, while triesLeft-- will evaluate the present value of triesLeft and then decrease the variable independently. -- Martin
<p>
Thanks guys. Yes I knew about the post-decrement and did that intentionally. But I reversed the logic as you both noticed... Great. New hope for Pugilist! Since most of the &gt; .03 releases used the buggy code I might even have a version among them that will kick some major ass with the bug nailed! -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
Nope. Checked it now, this logic error was introduced with 2.4.12 so I don't have a Pugilist hiding there that would outrank 2.4.03. Not to mention 2.0.9 which was the strongest Pugilist by far. It's awful having spent so much time trying to improve a bot and never ever coming close! -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
Yeah, well, I don't have that much pity for you ... I am at that stage with <a href="robowiki?Komarious" class=wikipagelink>Komarious</a>, and still about 40 points behind the best version of <a href="robowiki?Pugilist" class=wikipagelink>Pugilist</a> in the mini-rumble. :P (j/k) -- <a href="robowiki?Voidious" class=wikipagelink>Voidious</a>
<p>
<p>
Do you know what version of Pugilist has the highest rating in the <a href="robowiki?MiniBot" class=wikipagelink>MiniBot</a> rumble? As far as I can tell, it's 2.2c with a rating of 2076, but I thought I recalled seeing a version at 2080+ at one point. -- <a href="robowiki?Voidious" class=wikipagelink>Voidious</a>
</div><hr class=wikilinefooter>
<div class=wikifooter><form method="post" action="robowiki" enctype="application/x-www-form-urlencoded">
<a href="robowiki?Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki?Changes" class=wikipagelink>Changes</a> | <a href="robowiki?action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<a href="robowiki?action=edit&id=Pugilist" class=wikipageedit>Edit text of this page</a> | <a href="robowiki?action=history&id=Pugilist">View other revisions</a><br>Last edited October 4, 2006 18:16 EST by <a href="robowiki?Voidious" title="ID 7423 from dhcp196-27.openport.buffalo.edu">Voidious</a> <a href="robowiki?action=browse&diff=1&id=Pugilist">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /></form></div>
</body>
</html>