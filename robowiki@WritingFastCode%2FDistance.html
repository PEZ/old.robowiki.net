<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD><TITLE>WritingFastCode/Distance - Robo Wiki -= Collecting Robocode Knowledge =-</TITLE>
<META NAME='KEYWORDS' CONTENT='Writing, Fast, Code, Distance'/>
<LINK REL="stylesheet" HREF="/robodocs/wiki.css">
</HEAD><BODY BGCOLOR="white">
<div class=wikiheader><h1><a href="robowiki?Robo_Home"><img src="/images/RoboWiki.png" alt="[Home]" border=0 align="right"></a><a href="robowiki?back=/Distance">WritingFastCode/Distance</a></h1><a href="robowiki?Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki?WritingFastCode" class=wikipagelink>WritingFastCode</a> | <a href="robowiki?Changes" class=wikipagelink>Changes</a> | <a href="robowiki?action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<hr class=wikilineheader></div><div class=wikitext>Calculating the distance between two points is a slow operation due to the call to <tt>Math.sqrt()</tt>. However you can often use the square of the distance. 
<p>
For example, if you're finding which of two enemies is closer:
<p>
<blockquote>
<pre>

Point2D enemyOne;
Point2D enemyTwo;
Point2D me;

//Slow
if(me.distance(enemyOne) &lt; me.distance(enemyTwo)){
   ...
}

//Fast
if(me.distanceSq(enemyOne) &lt; me.distanceSq(enemyTwo)){
   ...
}

</pre>
</blockquote>
<p>
<p>
The two pieces of code work exactly the same. You can also use this trick for comparing to a constant, like so:
<p>
<p>
<blockquote>
<pre>

Point2D enemyOne;
Point2D me;

//Slow
if(me.distance(enemyOne) &lt; 100){
   ...
}

//Fast
if(me.distanceSq(enemyOne) &lt; 10000){ // distance is less than 100
   ... 
}

</pre>
</blockquote>
<p>
This optimization is only worth doing inside loops that get called a lot, <tt>Math.sqrt()</tt> a few times is fine but once you start doing thousands of calls it can really slow your bot down.
<p>
--<a href="robowiki?David_Alves" class=wikipagelink>David Alves</a>
<p>
<hr noshade class=wikiline size=1>
<strong>Discussion</strong>
</div><hr class=wikilinefooter>
<div class=wikifooter><form method="post" action="robowiki" enctype="application/x-www-form-urlencoded">
<a href="robowiki?Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki?WritingFastCode" class=wikipagelink>WritingFastCode</a> | <a href="robowiki?Changes" class=wikipagelink>Changes</a> | <a href="robowiki?action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<a href="robowiki?action=edit&id=WritingFastCode/Distance" class=wikipageedit>Edit text of this page</a> | <a href="robowiki?action=history&id=WritingFastCode/Distance">View other revisions</a><br>Last edited November 1, 2004 3:35 EST by <a href="robowiki?David_Alves" title="ID 3735 from c-67-180-85-38.client.comcast.net">David Alves</a> <a href="robowiki?action=browse&diff=1&id=WritingFastCode/Distance">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /></form></div>
</body>
</html>