<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD><TITLE>MeleeStrategy - Robo Wiki -= Collecting Robocode Knowledge =-</TITLE>
<META NAME='KEYWORDS' CONTENT='Melee, Strategy'/>
<LINK REL="stylesheet" HREF="/robodocs/wiki.css">
</HEAD><BODY BGCOLOR="white">
<div class=wikiheader><h1><a href="robowiki?Robo_Home"><img src="/images/RoboWiki.png" alt="[Home]" border=0 align="right"></a><a href="robowiki?back=MeleeStrategy">MeleeStrategy</a></h1><a href="robowiki?Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki?Changes" class=wikipagelink>Changes</a> | <a href="robowiki?action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<hr class=wikilineheader></div><div class=wikitext>(Starting stuff by <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>)
<p>
<H3>Some Notes about the timeline of a melee battle</H3>

<p>
<a href="robowiki?David_Alves" class=wikipagelink>David Alves</a>'s <em>Stages to a melee battle</em> (from the <a href="robowiki?Melee" class=wikipagelink>Melee</a> page):
<hr noshade class=wikiline size=1>
<OL >
<li> 10 bots on field, bots in bad starting positions die right away. Hope you're not one of them.
<li> 6-7 bots on the field, fighting over corners and trying not to get pushed into crossfires
<li> 3-4 bots on field,  everyone stays in their corners and snipes at each other. Try to get the other guys to target each other instead of you
<li> Duel
</OL>
<hr noshade class=wikiline size=1>
<p>
In reality, these stages aren't something you normally put into code when making a melee bot, they're observations about what a battle will look like between several very good melee bots.  The fact that these stages are defined in terms of position and movement says alot about what is important in melee, but let me add my feelings about the importance of targeting in these stages:
<p>
<OL >
<li> 10 bots on field - if there is someone close to you, it had better die before you.  Most good bots will turn and move away from other bots or from the center in general right away, so if you have some kind of targeting that shoots at the path of least resistance, this is where you'll notice it, but a semi-linear targeting will probably work for that first few seconds in the match.
<li> 6-7 bots on the field, you'll be happier if you're targeting one bot and no bot is targeting you.  You should be able to hit most of the bots you'd reasonably want to target at this point, and you won't be successful with a hit rate of less than maybe 25-30% at this point.
<li> 3-4 bots on the field, this is where you'll be the happiest with solid targeting.  Here's why: when you're down to 4 bots, as David pointed out, there's a <em>really</em> good chance that you're all in corners.  If the next bot who dies is the one across from you (the one you probably weren't targeting), you are probably next, because you're the most obvious target for <em>both</em> of the remaining enemies.
<li> Duel - I don't think I need to explain why targeting is important here.  It's your gun against their movement.
</OL>
<p>
The reason these stages are important to understand is really so that you can analyze your melee bot's performance.  If you put it in a battle with other bots of a similar level (say half better and half worse, but all as close in ability as possible), 
<hr noshade class=wikiline size=1>
<p>
<H3>How to put together a good melee bot</H3>

<p>
As with any kind of new robot, the main thing that's useful when making a new melee robot is to have some kind of idea you want to try.  It can be original or not, it can be a spin-off of what other people have done, or it could just be in general that you want to try making a melee bot.
<p>
Nowadays, most people have some experience with 1-on-1 bots before they go too deep into melee.  In reality, melee is just like 1-on-1, except that there's something that supercedes 1-on-1 movement (which is moving in such a way as to not be hit often) - moving in such a way that you aren't being shot at!
<p>
<H4>The theory of melee movement</H4>

<p>
You'll dodge every bullet if no one is firing at you, and so most melee movement is centered in one way or another around not getting attacked.  This is what makes melee movement so dang interesting.  If it is inevitable that you will be targeted, then you can start worrying about just not being hit.
<p>
In discussions with (melee legend) <a href="robowiki?ABC" class=wikipagelink>ABC</a>, I remember summarizing these two movement goals combine into the balance between "being in the right place" (not being shot at) and "moving in the right direction" (not being hit).  Since you can only move in one direction, sometimes you have to choose to either mov toward the right place or move in the right direction.  Since different bots prioritize these differently, some will be extremely predictable and easy to hit, but it doesn't matter until someone shoots at them.  In fact, in theory, as long as no one is shooting at you, the only reason you really have to keep moving is to make sure they keep not shooting at you (until they're shooting at you again, which would be nice to be able to magically determine).
<p>
<H4>Common ways of implementing melee movement</H4>

<p>
There are lots of ways people accomplish the goals of not being targeted and not being hit.  Some common examples:
<p>
<strong><a href="robowiki?AntiGravityMovement" class=wikipagelink>AntiGravityMovement</a></strong> - In AI I've heard this generalized as using "repulsive fields".  You could also combine it with attractive fields if you want, but there's rarely a real reason (same goes for tangential fields, for which there is a reason, but the actual implementation is hard to really get right in a pure anti-gravity force-vector sort of way).  The basis of it is just like in physics - you define a set of points that have an antigravitational (repulsive) force on them, you add all the force vectors together, and you let them "push" you in whatever direction they push you in.  Normally other bots and walls are assigned forces.  Sometimes the center of the field has a generic force as well, or even the guessed positions of bullets.  A classic example of <a href="robowiki?AntiGravityMovement" class=wikipagelink>AntiGravityMovement</a> is <a href="robowiki?TheArtOfWar" class=wikipagelink>TheArtOfWar</a>.  A simpler implementation is <a href="robowiki?Graviton" class=wikipagelink>Graviton</a>, but simpler in this case doesn't necessarily mean more clear (same goes for <a href="robowiki?Escape" class=wikipagelink>Escape</a>, which is a more convoluted bot based on <a href="robowiki?Graviton" class=wikipagelink>Graviton</a>).  <a href="robowiki?Hanji" class=wikipagelink>Hanji</a>'s page has a very stereotypical, very clear implementation of antigravity which might be helpful if you are trying to get into it.  The biggest challenge in getting <a href="robowiki?AntiGravityMovement" class=wikipagelink>AntiGravityMovement</a> right is weighting all the forces effectively, especially when there are more or fewer points on the field (maybe the walls have to push harder when there are more bots on the field pushing you toward them?).
<p>
<strong><a href="robowiki?CornerMovement" class=wikipagelink>CornerMovement</a></strong> - In the early days of Robocode, one of the frustrating things about trying to excel in melee was that the bots that seemed to do the best in battle did stupid little patterns in the corners of the battlefield.  This came from the general observation that the bots that lasted to be one of the last standing were the ones that got to the corners the fastest.  While this isn't really always true, there are probably fewer bots near you in a corner than in the middle, so the technique works - just go to the nearest corner, keep moving, and kill anything that's trying to take your corner from you.  I experienced frustration with this movement when I would watch <a href="robowiki?SandboxLump" class=wikipagelink>SandboxLump</a> with his stupidly simple movement kill <a href="robowiki?Coriantumr" class=wikipagelink>Coriantumr</a> in so many of my tests.  Out of my frustration came <a href="robowiki?Lib" class=wikipagelink>Lib</a>, the most complex <a href="robowiki?CornerMovement" class=wikipagelink>CornerMovement</a> ever put into a <a href="robowiki?NanoBot" class=wikipagelink>NanoBot</a> (I assume that's still true, it at least was at the time).  Traditionally, using <a href="robowiki?CornerMovement" class=wikipagelink>CornerMovement</a> will make you specialized as a melee bot, because it tends to work better against the best melee bots than against mediocre ones.
<p>
<strong>Moving in a small, simple pattern</strong> (for lack of a better name for it) - Alot of quite good nano melee bots just dance around in a star shape, or triangle or square.  Some of these go in a straight line for awhile first (until they hit a wall or something), so it's closer to a type of corner movement than anything.  The virtue of this movement is that you don't move around too much, so you are less likely to have new bots start targeting you because you move into their range, and it does well against the horde of melee nanos with something related to linear or circular targeting (because you change directions relatively often).  <a href="robowiki?Gem" class=wikipagelink>Gem</a>, <a href="robowiki?Infinity" class=wikipagelink>Infinity</a>, KomoriNinja<a href="robowiki?action=edit&id=KomoriNinja" class=wikipageedit>?</a> and <a href="robowiki?Trigon" class=wikipagelink>Trigon</a> are good examples of this movement.
<p>
<strong><a href="robowiki?MinimumRiskMovement" class=wikipagelink>MinimumRiskMovement</a></strong> - On the surface, this looks like just an implementation of <a href="robowiki?AntiGravityMovement" class=wikipagelink>AntiGravityMovement</a>, and maybe the difference is just nitpicky semantics to some, but I think the way it is implemented is different enough that the only similarity is really the basic fundamentals of melee movement.  It also seems much more versatile than <a href="robowiki?AntiGravityMovement" class=wikipagelink>AntiGravityMovement</a> and is also less likely to converge at some "happy" local minimum.  As I am biased, I think that the best, clearest implementation of <a href="robowiki?MinimumRiskMovement" class=wikipagelink>MinimumRiskMovement</a> is in <a href="robowiki?Coriantumr" class=wikipagelink>Coriantumr</a> and <a href="robowiki?Shiz" class=wikipagelink>Shiz</a>, although <a href="robowiki?HawkOnFire" class=wikipagelink>HawkOnFire</a>'s implementation is also available now and it is just as effective and maybe slightly more basic.  There are two basic parts to <a href="robowiki?MinimumRiskMovement" class=wikipagelink>MinimumRiskMovement</a>:
<UL >
<li> A Risk Function - Determines how good or bad a point is to go to.
<li> A Point-generating function - generates candidates to try in the risk function.
</UL>
Then you just go to the candidate point with the lowest risk (or highest benefit, although <a href="robowiki?MaximumBenefitMovement" class=wikipagelink>MaximumBenefitMovement</a> probably has more place in <a href="robowiki?Teams" class=wikipagelink>Teams</a>).  Randomness can assist in either function just as effectively.  Also, as an interesting tweak, you need to decide to look for a point to go to constantly rather than only when you reach the last point you were going to.  Both strategies have merits - you might get into a rut if you keep changing your mind on points, but you can also more quickly react to changes in the battlefield.
<p>
<strong><a href="robowiki?OneOnOne" class=wikipagelink>OneOnOne</a> Movement</strong> - If your bot is good at close combat, you might consider chasing one robot at a time with that movement.  Chances are that if you are close to one robot, you're far from others (because who's going to go running towards two other robots?)  <a href="robowiki?DoctorBob" class=wikipagelink>DoctorBob</a> is very successful in this, and it's also one of the reasons <a href="robowiki?Tracker" class=wikipagelink>Tracker</a> doesn't do too bad in a battlefield full of sample bots at least.
<p>
<H4>Things to think about in your movement</H4>

Here are a few things that you should consider with your movement, whichever type of implementation you pick:
<p>
<H5>Being far away from other bots</H5>

This one of the easier things to test for, of course, once bots are so far away, it doesn't matter as much if they get further.  That's why using the inverse square of the distance to each robot works so well (the threat approaches zero at some point).  This will likely keep you out of the action.
<p>
<H5>Moving perpendicularly (one-on-one-like?) to other bots</H5>

Especially bots that are close to you.
<p>
<H5>Don't hit walls or other bots (too much)</H5>

It might be tempting ;-) This is possibly a bigger deal in melee, just because you're going to be close to other bots and to the walls alot more than in one-on-one.
<p>
<H5>Stay out of the middle</H5>

People always say this, but in reality it's ok to be in the middle if the battle is still big and all the other bots are on the outside.  However, if you're still in the middle with 4 or 5 bots left, you won't likely last long.
<p>
<H5>Don't stay in the same place for too long</H5>

Just as in 1-on-1, this can be quick death.  I don't care how great that spot is, someone will get close enough to it to put you in danger in not too much time.
<p>
<H5>Guess who is/would fire at you</H5>

<p>
<em>Note - This is a little more advanced of a topic in melee movement, and it's a little hard to explain clearly, but it's also not impossibly hard to implement.  It's also the main secret of the movement in <a href="robowiki?Coriantumr" class=wikipagelink>Coriantumr</a> and <a href="robowiki?Shiz" class=wikipagelink>Shiz</a>.  <a href="robowiki?FloodHT" class=wikipagelink>FloodHT</a> does it as well, but its point-generating function is bad, so it doesn't really matter :-p  I'm not sure if anyone has really tried too hard to do this before.</em>
<p>
Looking at the list of ways one could pick a target, the one you have the most potential control over is whether you're the closest target for any other bot.  If I want to pick which point is the best one to be at, a big part of that is counting for each bot how many other bots are closer to them than me.  If 0 or 1 bot is closer to that robot than it is to me, that means it's likely to be aiming at me.  Combine that with the possible knowledge that that bot has hit you recently, or that you're shooting at that robot, you have a pretty good guess as to whether that bot is likely to be firing at you if you were (or are) at that point.
<p>
There are at least two applications of this information:
<OL >
<li> You want to be at the point where the fewest robots will target you.
<li> You only have to worry about being hard to hit to the robots that are likely to target you (in other words, the direction you move in to get to a given point only matters relative to bots that are likely to target either that point or your current location).
</OL>
<p>
<H5>Battle Dynamics change constantly</H5>

Be capable of adjusting and changing quickly, and don't try to plan too far into the future.
<p>
<hr noshade class=wikiline size=1>
<p>
<H3>Little melee tweaking notes</H3>

A few things that might just get you up a few spots in the rankings:
<p>
<H4>Melee Radar</H4>

What you do with your radar really depends on what your targeting strategy is, and whether or not you want to fire blind (firing blind means you don't fire when you can actually see your enemy, but rather in your general run loop or something).  If you just spin your radar constantly, you almost need to fire blind, otherwise your gun won't have time to turn before you fire.  However, I find (again, if your gun doesn't depend on a spinning radar, like some melee pattern-matchers do) that firing blind reduces my hit rate by a little.  I suggest (particularly if you're using a guess-factor gun in melee) using a melee radar lock, which is a trick I learned from PaulEvans<a href="robowiki?action=edit&id=PaulEvans" class=wikipageedit>?</a> (so it must work!)  A melee radar lock is spinning your radar until you're getting close to firing, and then lock on your target as if they were the only bot on the field for a couple ticks until you fire.  Plus, if you have a radar lock in your code, you can also use it for one-on-one :-)
<p>
<H4>Melee Firepower</H4>

Alot of hitting happens early in a melee match, but by the end you can be pretty well drained of energy.  Some people take the survivalistic element of melee to mean they should always fire low-powered bullets.  This is only partly true - you will likely start the melee battle close to other bots.  So close, in fact, that you are very likely rack up alot of hits (either for or against you) in the first 5 seconds of a match.  Don't be shy about firing bullets that are more than powerful enough to finish a bot off if they're really close to you (because you still want to finish them off if they hit you or someone else before your bullet reaches them, and if you're REALLY close, that's likely to happen).  I've seen some smaller melee bots (I think <a href="robowiki?Graviton" class=wikipagelink>Graviton</a> and <a href="robowiki?Troodon" class=wikipagelink>Troodon</a> were two of them) that even multiply their firepower by getOthers().  I also think that you shouldn't make the mistake of having too "merciful" of firepower in the final stages of the battle (meaning you should be aiming to kill when you're shooting at a low-energy target at any point of the battle).
<p>
<H4>Picking a Target</H4>

There are so many heuristics that can be dreamed up for this, but one of the easiest and most effective is to simply target the closest enemy.  While this is the best <em>general</em> guideline, it might be beneficial to take a few other things into consideration:
<UL >
<li> Who has the lowest energy?  There are a few reasons you might want to target them:
<UL >
<li> To get the kill bonus.
<li> If they are at least sort of close to you, and they are in a "safer" part of the battlefield, you might be able to take their place if they die :-)  If your movement allows you to get closer to robots with lower energy, you might be more likely to do this.
<li> So you can outsurvive them!  You get something like 100 points for every bot you outlast in a round.  You'd hate to see a robot that had 5 energy when you had 60 end up dying after you because no one shot at it when you could have.
<li> if you have a good risk function your bot will attack a low energy bot in case it has a good position on the field so that your bot will get there (important if there are around 4 to 6 bots left).
</UL>
<li> Who keeps shooting at you?  There are two ways to avoid getting shot at - get them to shoot at someone else, or take them out.  Yes, killing someone can help you conserve energy!
<li> Try not to thrash between enemies too much, especially when you're ready to fire.  If you're only using distance to pick a target, try only switching targets if the new target is 100 pixels closer, or 10% closer, or something.  If you have some other kind of "score" technique to picking a target, something similar could be used.  Thrashing can cost you, especially early in a battle.  Another good technique is to not switch targets if your gun is almost cool (unless your target is dead, of course).
<li> There's a theory that the reason you pick the robot closest to you is because you're more likely to hit them.  If you're more likely to hit someone else, maybe you should shoot at them.  Of course, don't forget the advantages of having only low-energy (or dead!) bots close to you.
</UL>
<p>
<H3>Enemy Management</H3>

If you're trying to convert a 1-on-1 bot to a melee bot, you'll find out quickly that all the little assumptions you used to make when you coded your 1-on-1 bot are wrong.  It can be a big challenge to effectively store volatile information about your enemy (like current position, heading, velocity, etc) as well as persistent information about your enemy (like targeting information).  One of the big challenges is how to specify that a given enemy is dead.  I stumbled on a great way to do this when I was working on <a href="robowiki?Coriantumr" class=wikipagelink>Coriantumr</a>, which was to have an volatile object (class <a href="robowiki?EnemyInfo" class=wikipagelink>EnemyInfo</a>) in a Map that has position, heading, velocity, and all the obvious stuff in it, as well as a list of waves (note - all these things <em>should</em> go away between rounds).  This map doesn't have to be static (although it probably is for codesize reasons), because it's recreated every round.  In on<a href="robowiki?ScannedRobot" class=wikipagelink>ScannedRobot</a>, I check to see if the robot I'm scanning is in the map, and if it isn't, I put it in there.  Then I get the <a href="robowiki?EnemyInfo" class=wikipagelink>EnemyInfo</a> object and operate on it all over on<a href="robowiki?ScannedRobot" class=wikipagelink>ScannedRobot</a>.  onRobotDeath<a href="robowiki?action=edit&id=RobotDeath" class=wikipageedit>?</a> removes that robot's object from the map if they exist (so the robot no longer exists when I don't care about it anymore).  Meanwhile, I have a different map which maps the name to the guess factor stats which is static and isn't reinitialized between rounds.
<p>
<H3>Targeting algorithms in melee</H3>

Lots of things can work well in melee:
<p>
<H4><a href="robowiki?HeadOnTargeting" class=wikipagelink>HeadOnTargeting</a> in melee</H4>

Always a good place to start.  On a related note, I've heard of melee targeting which targets the rolling average of the robot's position, since it is common for a robot to stay near the same place for awhile.  Not sure how this really compares in general to just firing right at the target.
<p>
<H4><a href="robowiki?LinearTargeting" class=wikipagelink>LinearTargeting</a>/<a href="robowiki?CircularTargeting" class=wikipagelink>CircularTargeting</a> and variants</H4>

You can go far with some kind of percent-of-linear targeting, or using circular targeting in melee.  It has been observed that if you are close to an enemy, you have really good odds firing with linear targeting, and if they're further away (say moving around in a corner or something), you have pretty good odds with head-on or somewhere near that.  Take a look at <a href="robowiki?Infinity" class=wikipagelink>Infinity</a> for a really elegant solution to this observation.  Another thing that might work well is velocity-averaging.  Some more observations could certainly be collected to create a generally good melee gun that is simple to understand and code and is *very* resiliant to missed scans.
<p>
<H4><a href="robowiki?PatternMatching" class=wikipagelink>PatternMatching</a> in melee</H4>

Be careful to make your targeting algorithm resistant to not having constant scans.  If you spin your radar, you will get a scan on a given robot every 8 ticks on average.  Occasionally (ok, actually somewhat often), you'll scan a bot two ticks in a row, and that should throw your targeting off.  Often, you'll scan the robot again after 7 or 9 ticks.  If your targeting algorithm absolutely requires scans every 8 ticks, you'll have to make it realize that the world isn't perfect.  In my opinion, pattern-matching has been slowly becoming obselete in one-on-one in its purest form (note that there are ways of making it last in the realm of random movement), but is still definitely alive and kicking in the melee world, if only because melee isn't as well developed.
<p>
<H4><a href="robowiki?GuessFactorTargeting" class=wikipagelink>GuessFactorTargeting</a> in melee</H4>

<a href="robowiki?FloodMini" class=wikipagelink>FloodMini</a> from the start has had a wave implementation that was really good about missed scans, mainly because its radar was far from perfect.  The same idea is in <a href="robowiki?Coriantumr" class=wikipagelink>Coriantumr</a>'s gun, which is to interpolate missed scans linearly and check at each interpolated position/time if the wave hits.  This is probably the trickies part, along with how to store the waves (see the Enemy Management section above).  In general in melee, you're pretty safe firing a wave on every scan of a robot, not just when you fire at them, but realize that robots might be moving different relatively to you if you're not shooting at them (or likely to shoot at them anwyays).  Segmenting on distance and possibly battle size can help compensate for this problem, as well as segmenting on lateral direction (are they moving roughly perpendicular to you, toward you, or away from you?)  Acceleration segmentation can be a little harder to do in melee, since you aren't getting consecutive scans for all of your waves, but I've observed that if the sign of the enemy's velocity is opposite of the previous scan, they're probably accelerating (unless they are already at velocity 8).
<p>
Also, I recommend using a melee radar lock for <a href="robowiki?GuessFactorTargeting" class=wikipagelink>GuessFactorTargeting</a> (see Melee Radar above).
<p>
For any of these techniques, you should consider making sure you don't fire off the battlefield at a or in a direction that can't possibly be reached by your target.  This sounds obvious, but I don't know how many times I've seen a robot aiming at another robot that was moving toward a wall, and the shooting robot just shot right into the wall, which is a complete waste of a shot.  This is one of the improvements I made in <a href="robowiki?Coriantumr" class=wikipagelink>Coriantumr</a> from 1.0 to 1.1.
<p>
<H3>Evaluating your Melee bot</H3>

Before I get too far into this, I want to emphasize that the number one way of figuring out where you can improve is by critically watching the battles.  But, there are some other useful things you can do that might take a little less time once you get more refined:
<p>
<UL >
<li> Create a test bed.  Find a bunch of bots that are at least in the same neighborhood as you as far as ability, some better and some worse.  I also make a text file where I log battles and what tweaks I made between them.  Of course, don't give too much credit to the scores, since they often vary wildly.
</UL>
<p>
<UL >
<li> Keep track of how long you're staying alive.  I like to add this code into my bot for testing:
</UL>
<pre>
//global declarations:
static int[] finishes;
.
.
.
//beginning of run():
if (finishes == null)
	finishes = new int[getOthers()+1];
.
.
.
//somewhere:
public void onWin(WinEvent e){onDeath(null);}
public void onDeath(DeathEvent e)
{
	finishes[getOthers()]++;
	for (int i=0; i&lt;finishes.length; i++)
		out.print(finishes[i] + " ");
	out.println();
}
</pre>
This will print out a list of wins, 2nd places, 3rd places, etc. at the end of each match.  Obviously, you want to maximize the wins ;-)  Of course, what you want to do first is make sure this gives a regular, smooth distribution over time.  You can analyze where some of your weaknesses (relative to the stages to a melee battle at the top) by where the highest numbers are.  For instance:
<UL >
<UL >
<li> If you have alot of last and next-to-last finishes, maybe you don't do well at close quarters or get out of tough starting situations very well.  Try to get to the best place you can and get other bots to target each other instead of you.
<li> If you are dying alot in a part of the battle where there are still alot of bots, but it's not the beginning really, you might just need to be more random/harder to hit.  In a standard 10-bot battle, this is probably about 6th-8th place finishes.
<li> If you tend to have hugely more 5th and 6th places than 3rd and 4th, it could be you don't get out of the middle soon enough.
<li> If you have way more 3rd places than 4th or 2nd, it probably means that you're not good at getting rid of one of the guys closer to you at the end of a battle.
<li> If you have way more 2nd places than 1st, it could be that you have lower 1-on-1 strength than the other bots.  On the other hand, it could be that you're barely surviving before that.  Watch a few battles to figure it out.  I see <a href="robowiki?HawkOnFire" class=wikipagelink>HawkOnFire</a> finishing off Shadow at the end quite a bit simply because it has 4 times as much energy when they get down to 1-on-1.
</UL>
</UL>
The first stages might be more important score-wise than the last ones, at least at first.
<p>
<UL >
<li> If you start to beat your test bed, upgrade it.
<li> Just like in 1-on-1, every tweak counts, even the tiniest change to your power management can be catastrophic or miraculous.
<li> Make up other techniques to help you test the parts of a battle that you're not as good at.  For instance:
<UL >
<li> If you do well getting into the last 4, but have trouble making into the last 3, you could try tweaking in 4-bot battles, or you could try tweaking in 10-bot battles on a 2000x2000 battlefield (which might have a similar strategic effect).  This can also expose what your bot does if it can't see anyone (which only rarely happens on a 1000x1000 battlefield, probably only when it gets down to 1-on-1).
<li> If you have an abnormal amount of last place finishes, you could try testing on a point-blank melee (10 bots on 400x400?  That's just like doing the start of a battle for the whole battle).  If you try that with today's top melee bots, you'll find that <a href="robowiki?Coriantumr" class=wikipagelink>Coriantumr</a> and bots with iterations of his movement are the best at this, hands down (let me know if you can find anyone who can beat it).  Again, this also might expose some of the other problems you have with your movement that make your bot too specialized (or just less versatile).
<UL >
<li> the development version of <a href="robowiki?Aleph" class=wikipagelink>Aleph</a> can (changed angle calculation in the risk function). just to let you know ;) -- <a href="robowiki?Rozu" class=wikipagelink>Rozu</a>
<li> Interesting, and <a href="robowiki?Aleph" class=wikipagelink>Aleph</a> in the version I have wasn't even too shabby.  I think some iteration of the dev version of <a href="robowiki?Coriantumr" class=wikipagelink>Coriantumr</a> beat the top 10 or 15 bots in the melee rumble by a good 15000-20000 points in 100 rounds, though, so something was working right there. -- <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>
</UL>
<li> If it's that stage between the beginning and half way that gets you down, the point-blank melee thing can also help.  Try even upping the stakes and see how you perform at close range (say 20 bots on a 400x400 battlefield.  This can be pretty funny to watch).
</UL>
<li> You might want to delete saved data if you test with bots that save data to disk (<a href="robowiki?SandboxDT" class=wikipagelink>SandboxDT</a> or <a href="robowiki?SandboxLump" class=wikipagelink>SandboxLump</a>, for instance).
<li> If you're looking at your <a href="robowiki?RoboRumble" class=wikipagelink>RoboRumble</a> problem bots, realize that some of them might be a problem bot for you because they do better against lots of other bots than you do, not because they're a direct problem for you.  Also, PBI's are deceptively low in melee, because there are 8 other bots in every battle who affect the performance for each of you.
<li> WATCH YOUR BOT. get a feeling for your bots behavior. worked fine for <a href="robowiki?Aleph" class=wikipagelink>Aleph</a>.
<li> Make a battle with 10 of your bot. If the scores are somewhat similar, that's good. If the scores are hugely different, luck might play a factor in your bot's score. You might want to tweak a little bit in that case.
<li> Add any other tips that seem to work for you :-)
</UL>
<hr noshade class=wikiline size=1>
I think we should add a few tutorials or in-depth descriptions of a few good melee bots (especially the open-source flavor).  Maybe a few pages like:
<UL >
<li> <a href="robowiki?MeleeStrategy/UnderstandingCoriantumr" class=wikipagelink>/UnderstandingCoriantumr</a>
<li> <a href="robowiki?MeleeStrategy/UnderstandingHawkOnFire" class=wikipagelink>/UnderstandingHawkOnFire</a>
<li> <a href="robowiki?MeleeStrategy/UnderstandingGruweltje" class=wikipagelink>/UnderstandingGruweltje</a>
<li> /UnderstandingNimrod<a href="robowiki?action=edit&id=MeleeStrategy/UnderstandingNimrod" class=wikipageedit>?</a>
<li> <a href="robowiki?MeleeStrategy/UnderstandingInfinity" class=wikipagelink>/UnderstandingInfinity</a>
<li> /UnderstandingLib<a href="robowiki?action=edit&id=MeleeStrategy/UnderstandingLib" class=wikipageedit>?</a>
<li> /UnderstandingTroodon<a href="robowiki?action=edit&id=MeleeStrategy/UnderstandingTroodon" class=wikipageedit>?</a>
<li> /UnderstandingDoctorBob<a href="robowiki?action=edit&id=MeleeStrategy/UnderstandingDoctorBob" class=wikipageedit>?</a>
</UL>
These can be filled in by the authors or anyone else who has taken time to understand them (or feel free to describe your own).
<hr noshade class=wikiline size=1>
Watch this space for more! -- <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>
<p>
Megathanks for making this page Kawigi! Good reading. I'm not sure I agree I wouldn't put the different stages into code. Some of the <a href="robowiki?ChironexFleckeri" class=wikipagelink>ChironexFleckeri</a> versions did that even. CF also segments it's movement and targeting stats on this. Even if the latest version only separates the melee stages from the duel one. But that's mostly a codesize issue. It seems CF is using <a href="robowiki?MinimumRiskMovement" class=wikipagelink>MinimumRiskMovement</a> as you describe it. Though I think that name is too general. I would say <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a> is minimum-risk too. -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
Indeed very good reading. A real melee-movement (read: <a href="robowiki?AntiGravityMovement" class=wikipagelink>AntiGravityMovement</a> or <a href="robowiki?MinimumRiskMovement" class=wikipagelink>MinimumRiskMovement</a>) goes up to #3 on my prioritylist, a one-on-one PM-gun just has to wait a little longer. -- <a href="robowiki?GrubbmGait" class=wikipagelink>GrubbmGait</a>
<p>
I definitely think that <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a> is a simulation-involved form of <a href="robowiki?MinimumRiskMovement" class=wikipagelink>MinimumRiskMovement</a>, in fact, I've even tried (unsuccessfully, but I think I know what my mistakes were) to implement a flattening movement with minimum-risk concepts.  As for not coding the different stages, I'm specifically referring to movement - I would encourage targeting based on those phases, because segmentations are all about the observation of different movement patterns in your enemy.  Since robots who weren't even coded to care how big the battle is move differently with 4 robots than with 8, it's very reasonable to segment on that.  As far as coding it in movement, I think that's dangerous, mostly because it can unnecessarily specialize your bot.  I think I remember <a href="robowiki?David_Alves" class=wikipagelink>David Alves</a> saying that he preferred using fluid functions to if statements if he could help it, and this is a good example - if you have a risk function that you want to emphasize some feature more when you have more bots, you can put getOthers() into the function, or if it's something that isn't relative to specific bots, you can make it not scale to getOthers() (what I mean is that if your risk function has a part that involves iterating enemies and a part that doesn't, if you don't multiply the part that doesn't by getOthers(), it will automatically have more bearing with fewer bots on the field, because the total numbers will be smaller). -- <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>
<p>
I totally understand what David means by fluid functions rather than if statements. I think many of my bots are extremes of that. <a href="robowiki?Aristocles" class=wikipagelink>Aristocles</a>, <a href="robowiki?Pugilist" class=wikipagelink>Pugilist</a> and <a href="robowiki?CassiusClay" class=wikipagelink>CassiusClay</a> all have very little of conditionals and work without special cases as much as they can. However, optimal melee behaviour between 10 and 4 bots might not represent a fluid change of state. I say "might" since I have very little experience with this. -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
I guess that I'm more of the opinion that a fundamentally sound movement implementation will act optimally (albeit differently) in these very different cases, because the goals are primarily the same.  Added a few more sections. -- <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>
<p>
Again thanks! This is a candidate for the "best Robowiki page ever" title. -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
You're welcome.  Added a bit more content (can you tell I'm having trouble focusing on work?). -- <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>
<p>
Quote: 'Add any other tips that seem to work for you ' End Quote.<br>
What other tips, are there any tips left somewhere. This is the most informative page I have seen sofar. Although most information can be found elsewhere scattered on this wiki, this is the best concentration of useful information I've seen. It feels like I have still to write my first melee-bot. You have my vote. -- <a href="robowiki?GrubbmGait" class=wikipagelink>GrubbmGait</a>
<p>
Oh, there are plenty more development tests which can be applied to melee, I'm sure I haven't exhausted them all (or even remembered all of the ones I've used).  Also, is there some place where you're voting for best pages?  I think if this is one of the best pages, it's because (at least when I started trying to do it) there just is a lack of information about melee here.  There's a few people who are really good at it, but not alot of idea-sharing and implementation sharing.  In fact, before I released <a href="robowiki?Coriantumr" class=wikipagelink>Coriantumr</a> and <a href="robowiki?Shiz" class=wikipagelink>Shiz</a>, I think <a href="robowiki?Nimrod" class=wikipagelink>Nimrod</a> and <a href="robowiki?TheArtOfWar" class=wikipagelink>TheArtOfWar</a> were the only top-10 melee bots that were even open-source (and I think most people are a little intimidated trying to read <a href="robowiki?TheArtOfWar" class=wikipagelink>TheArtOfWar</a>'s code, simply because of it's mass and complexity).  So I guess this is a tribute to the black hole and the prying I did to get information out of the top melee guys when I was newer to it. -- <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>
<p>
A real pleasure to read this page. -- <a href="robowiki?Rozu" class=wikipagelink>rozu</a>
<p>
Indeed. It's not only because melee info was so scarce before. This page is so well written and composed too. You should consider a writer's career Kawigi. =) -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
Well, I do think I write clearly (and not all of this is easy to explain!), and an extra read over the more complicated parts usually reveals a better way to explain something.  While clear writing is a forte, however, conciseness isn't, so if I get to really trying to explain something (example: the old <a href="robowiki?FloodHT" class=wikipagelink>FloodHT</a> hype page), you should expect to read something long, clear, and often full of rambling and rants.  I think that both my clarity and verbosity are partly a result of being an educated native English-speaker (in "programming" circles, this isn't critical, but some people do still have trouble expressing themselves effectively in English.  That's why we don't have a big clear disertation like this on what "Wave" pattern-matching is - I'm almost positive <a href="robowiki?Iiley" class=wikipagelink>Iiley</a> has written one in Chinese on his site, though).
<p>
Another thing I've sacrificed for the sake of clarity and organization is order - some of you read this all the way through the first time I posted it, and I've added things to it since then, not necessarily at the end.  The diff functionality of the wiki helps reduce the disadvantages of this, though :-)  At any rate, I think that this page has stablized a bit, and the last set of links I added will be what really makes it more in-depth. -- <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>
<p>
I don't think there is such a thing as Wave-PM. Unless the mega-failure <a href="robowiki?Resin" class=wikipagelink>Resin</a> counts. =) -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a>
<p>
That's because semantically, you think of any gun for which the shot bearing is calculated from a wave as statistical.  <a href="robowiki?Iiley" class=wikipagelink>Iiley</a> didn't think that way (and I agree with him on this).  His gun was very much a pattern matcher (just as much as <a href="robowiki?NanoLauLectrik" class=wikipagelink>NanoLauLectrik</a>'s gun) - It matched a single pattern.  It wasn't a pattern <em>projector</em> - the way it actually calculated the bearing to fire at was unrelated to the pattern, it was the bearing of a wave fired at the point in time of the end of that pattern. -- <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>
<p>
No, I don't, sementically, think of any gun using waves for shot bearings as statistical. <a href="robowiki?Resin" class=wikipagelink>Resin</a> should prove this. And <a href="robowiki?Ali/BumbleBee" class=wikipagelink>Ali/BumbleBee</a> uses a very Cigaret like gun. Very similar actually. (Though that's a coincident if there ever were one.) It's still statistical. As is Cigaret's. In theory you could take any PM gun and use GFs for projection instead of pattern-replay. It would still be a PM gun. If Cigaret's gun is a PM gun then so are all my <a href="robowiki?Tityus" class=wikipagelink>Tityus</a> derived guns and <a href="robowiki?FloodMini" class=wikipagelink>FloodMini</a>'s too. The only difference is that <a href="robowiki?FloodMini" class=wikipagelink>FloodMini</a> stores the segmented data for much faster access. Look at how the latest version of <a href="robowiki?ChironexFleckeri" class=wikipagelink>ChironexFleckeri</a> stores its GF's and you will see a gun that could be tweaked to act exactly like Cigaret's only order of magnitudes faster.All Cigaret is doing is asking "what GF did the enemy end up at last tick that looked like this one?". That's what CFis asking too. <a href="robowiki?FloodMini" class=wikipagelink>FloodMini</a> makes it "ticks" (plural) and uses the most common answer. Where, going from <a href="robowiki?FloodMini" class=wikipagelink>FloodMini</a> to Cigaret, does things turn PM? But hey, remove this babbling! It's now cluttering your excellent melee strategy page. =) -- <a href="robowiki?PEZ" class=wikipagelink>PEZ</a> 
<p>
<em>Where, going from <a href="robowiki?FloodMini" class=wikipagelink>FloodMini</a> to Cigaret, does things turn PM?</em> - at the point where it's storing the last 3500 ticks of arbitrary information (plus whatever has been collected this round) and comparing each consecutive group of 72 ticks with the last 72 ticks to find the closest match, it turns into a PM (actually, it looks like he compares every 6th tick back 12 times, probably for performance reasons).  Note: Feel free to move this to another, more appropriate page :-) -- <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>
<p>
I think the important difference between PM and Statist is the sorting. Pure PM sort every pattern to a single unique pattern, and Statist sort all patterns to be a certain number of kind(That's the segments). So in PM, there is not probability or factor, but statist is, PM search the closest match but Statist search the big probability(factor). So in this case, <a href="robowiki?Cigaret" class=wikipagelink>Cigaret</a>'s gun are pure PM. <a href="robowiki?FloodMini" class=wikipagelink>FloodMini</a>'s are pure statistical. Some combine way search the certain number of closest matchs and then segment it to count the factors was both PM and Statistical(maybe that was how Shadow gun does). 
<p>
Well now, friends, very excited seen that you are focus into melee, and this is a cool page, Kawigi, great down. Maybe more melee discussing will be added on. The last version of <a href="robowiki?BlestPain" class=wikipagelink>BlestPain</a> i tried to add the Lacrimas 1v1 movement strategy to melee, so <a href="robowiki?BlestPain" class=wikipagelink>BlestPain</a> becamed a melee bot. But it did not good. I's hard to write a good melee movement. But when i saw PEZ and some other robocode friends are try to implement <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a> in melee, i am waiting and see, I am cowered, when i was impelmenting Pear, i plan to implement <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a> melee movement in it, but you know Pear's 1v1 was not enough good yet. Well however, maybe i will have a try.~:] -- <a href="robowiki?Iiley" class=wikipagelink>iiley</a>
<p>
Yeah, I think I knew that <a href="robowiki?BlestPain" class=wikipagelink>BlestPain</a> was trying to do <a href="robowiki?WaveSurfing" class=wikipagelink>WaveSurfing</a> in melee.  It's not a bad thought, really, but it has two downfalls:
<UL >
<li> You don't quite know who's aiming at you in the first place (although I've hinted that you can make a conservative guess)
<li> There are too many dang bullets sometimes.
</UL>
That's not to say it won't work, though.
<p>
I hope the net effect of this page is that more discussion, development and general competition will happen in melee. -- <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>
<p>
Yup, i don't quite know who's aiming at me in the first place, so i can't think of every one are aiming me, i assume every robot target the closest enemy, then i just surf one bot's bullets. So there is not many dang bullets, but it is not very precision but most robots are targeting ther closest enemy in rumble. However, <a href="robowiki?BlestPain" class=wikipagelink>BlestPain</a> are not real a sufer, it's Lacrimas's dodge movement, so it did not very good. If i want to improve it, i should base on <a href="robowiki?Pear" class=wikipagelink>Pear</a>, but Pear's movement can hardly turn to melee, months ago, I'm think of just dodge enemy's bullet(The Highest of Factors) by Anti-Gravity, it must be easy to implemented than sufering(Many bullet may be easy to dodge than many Waves).  -- <a href="robowiki?Iiley" class=wikipagelink>iiley</a>
<p>
Early in the development of <a href="robowiki?Ugluk" class=wikipagelink>Ugluk</a> I noticed that he was doing well in melee.  His movement was not complicated either.. it was basically going top speed with a slight weave and bouncing of walls at 45 degrees.  While he didn't favor corners or avoid the center of the map, he lived quite a while because in order to remain a favorable target his enemies would have to chase him at top speed like a ram bot, which isn't a popular movement style.  It also means he would present himself as a target option to other robots as he went on his way, but with infrequent full circle radar sweeps by the enemy <a href="robowiki?Ugluk" class=wikipagelink>Ugluk</a> had a low chance of being chosen as the most favored target at any point.  While the movement has been overhauled a few times, I try to give <a href="robowiki?Ugluk" class=wikipagelink>Ugluk</a> an opportunity to shake pursuers in melee while not actively finishing off an opponent. --<a href="robowiki?Martin_Alan_Pedersen" class=wikipagelink>Martin Alan Pedersen</a>
<p>
I was thinking of making a <a href="robowiki?GrudgeBot" class=wikipagelink>GrudgeBot</a>, a bot that holds a grudge against the first bot it sees in a melee battle and proceeds every round there after to go after that same bot, ignoring all the others (cept for movement of course) till the bot it has a grudge against is gone. I was gonna do this for the sheer evil of it, but at the same time the bot wouldn't be much of a contender, but instead be a bot that drags down all the other bots. (Sorry i'm having one of those mornings where you just wanna make something truely evil) -- <a href="robowiki?Chase-san" class=wikipagelink>Chase-san</a>
<p>
How do you make a bot that's shooting at you shoot at another bot (besides moving away from the shooting bot)? --Starrynte
<p>
A lot of bots just target the closest bot, so making another bot the closest would be one way. Some bots take energy into account, so shooting at another bot close to it might make it target that one. Really, though, there's only so much you can do... (You could also just try to kill that bot. =))-- <a href="robowiki?Voidious" class=wikipagelink>Voidious</a>
<p>
My latest melee movement is a pretty sound minimum risk implementation.  One thing I am observing is that it is pretty weak in the very beginning.  If you look at a melee round by how many opponents are left at the time, there is a large portion of it spent with 9 opponents.  If your movement can't handle the opening of the round, you are going to get eliminated much more than your share.  Right now in testing against the 9 best author's best bots, I am getting more than my share of Last Man Standing, but I am also getting killed first twice as much as the average.  I may introduce a new opening movement and then switch after the first person dies.  (I've broken it down even further in the past, but with duel style movements.) -- Martin
<p>
<a href="robowiki?MeleePatternMatching" class=wikipagelink>MeleePatternMatcher</a> doesn't seem to work yet. Any ideas? (post on <a href="robowiki?MeleePatternMatching" class=wikipagelink>MeleePatternMatching</a> page) --<a href="robowiki?Starrynte" class=wikipagelink>Starrynte</a>
<p>
Right now, <a href="robowiki?Starrynte/Smash" class=wikipagelink>Smash</a> is thrashing between enemies a little too much. Does anyone know how to fix? (code is posted at <a href="robowiki?Starrynte/Smash" class=wikipagelink>Starrynte/Smash</a>) --<a href="robowiki?Starrynte" class=wikipagelink>Starrynte</a>
<p>
There are two good ways to prevent this that I've seen.  The first is not to switch targets unless your previous target dies or is at least 10% (for example) more desireable than the current target.  In practice, this usually means until someone else is 10% closer to you than your previous target.  The other way (which I believe <a href="robowiki?Coriantumr" class=wikipagelink>Coriantumr</a> does, but I can't remember for sure) is to realize that it only matters if you thrash too much if you do it right before you were going to fire - so only switch targets if your gun won't cool for another 4 or 5 turns. -- <a href="robowiki?Kawigi" class=wikipagelink>Kawigi</a>
<p>
Ok...thnx Kawigi --<a href="robowiki?Starrynte" class=wikipagelink>Starrynte</a>
<p>
Though I was not around for this, I have read about the timeframe that <a href="robowiki?Cynical" class=wikipagelink>Cynical</a> was released, which had a very hard to hit (at the time) movement style, and didn't bother to fire.  He'd win battles through attrition, presumably prompting the introduction of points awarded for bullet damage to discourage the mockery.  So the present assumption is that you need to actively attempt to damage your opponents to compete effectively.  I am now wondering if that applies in Melee.  In the early stages of the battle you definitely need to lay out as much damage as you can, because your opponents have less room to move and even misses are still likely to hit someone else.  But later on, as the Last Man Standing bonus of 90 points is in sight, it may be time to be very conservative with your shots.  Just a thought.  -- Martin
</div><hr class=wikilinefooter>
<div class=wikifooter><form method="post" action="robowiki" enctype="application/x-www-form-urlencoded">
<a href="robowiki?Robo_Home" class=wikipagelink>Robo Home</a> | <a href="robowiki?Changes" class=wikipagelink>Changes</a> | <a href="robowiki?action=editprefs">Preferences</a> | <a href='?action=index'>AllPages</a><br>
<a href="robowiki?action=edit&id=MeleeStrategy" class=wikipageedit>Edit text of this page</a> | <a href="robowiki?action=history&id=MeleeStrategy">View other revisions</a><br>Last edited January 7, 2008 17:18 EST by <a href="robowiki?Martin_Alan_Pedersen" title="ID 13117 from 208.147.70.132">Martin Alan Pedersen</a> <a href="robowiki?action=browse&diff=1&id=MeleeStrategy">(diff)</a><br>Search: <input type="text" name="search"  size="20" /><input type="hidden" name="dosearch" value="1"  /></form></div>
</body>
</html>